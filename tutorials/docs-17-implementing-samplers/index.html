<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.0">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Implementing samplers – Turing.jl</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../versions.html" rel="next">
<link href="../../tutorials/docs-07-for-developers-variational-inference/index.html" rel="prev">
<link href="../../assets/favicon.ico" rel="icon">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<style>html{ scroll-behavior: smooth; }</style>
<style>
  a {
    text-decoration: none;
  }
  a:hover {
    text-decoration: underline;
  }
</style>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../../theming/styles.css">
</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="https://turinglang.org/" class="navbar-brand navbar-brand-logo">
    <img src="../../assets/images/turing-logo.svg" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="https://turinglang.org/">
    <span class="navbar-title">Turing.jl</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../tutorials/docs-00-getting-started/"> 
<span class="menu-text">Get Started</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../tutorials/00-introduction/"> 
<span class="menu-text">Tutorials</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://turinglang.org/library/"> 
<span class="menu-text">Library API</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://turinglang.org/news/"> 
<span class="menu-text">News</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://turinglang.org/team/"> 
<span class="menu-text">Team</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-v0.33.0" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">v0.33.0</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-v0.33.0">    
        <li>
    <a class="dropdown-item" href="https://turinglang.org/docs/changelog.html">
 <span class="dropdown-text">Changelog</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://turinglang.org/docs/versions.html">
 <span class="dropdown-text">All Versions</span></a>
  </li>  
    </ul>
  </li>
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
    <a href="https://x.com/TuringLang" title="Turing Twitter" class="quarto-navigation-tool px-1" aria-label="Turing Twitter"><i class="bi bi-twitter"></i></a>
    <a href="https://github.com/TuringLang/Turing.jl" title="Turing GitHub" class="quarto-navigation-tool px-1" aria-label="Turing GitHub"><i class="bi bi-github"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item">Documentation</li><li class="breadcrumb-item"><a href="../../tutorials/docs-04-for-developers-abstractmcmc-turing/index.html">For Developers (Inference)</a></li><li class="breadcrumb-item"><a href="../../tutorials/docs-17-implementing-samplers/index.html">Implementing Samplers</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Documentation</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="false">
 <span class="menu-text">Using Turing - Modelling Syntax and Interface</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/docs-00-getting-started/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Getting Started</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/docs-14-using-turing-quick-start/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Quick Start</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/docs-12-using-turing-guide/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Guide</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/docs-17-mode-estimation/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Mode Estimation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/docs-09-using-turing-advanced/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Advanced Usage</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/docs-10-using-turing-autodiff/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Automatic Differentiation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/docs-13-using-turing-performance-tips/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Performance Tips</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/docs-11-using-turing-dynamichmc/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Using DynamicHMC</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/docs-15-using-turing-sampler-viz/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Sampler Visualization</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/docs-16-using-turing-external-samplers/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">External Samplers</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="false">
 <span class="menu-text">Using Turing - Tutorials</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/00-introduction/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction to Turing</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/01-gaussian-mixture-model/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Gaussian Mixture Models</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/02-logistic-regression/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Bayesian Logistic Regression</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/03-bayesian-neural-network/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Bayesian Neural Networks</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/04-hidden-markov-model/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Hidden Markov Models</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/05-linear-regression/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Linear Regression</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/06-infinite-mixture-model/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Infinite Mixture Model</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/07-poisson-regression/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Bayesian Poisson Regression</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/08-multinomial-logistic-regression/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Multinomial Logistic Regression</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/09-variational-inference/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Variational Inference</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/10-bayesian-differential-equations/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Bayesian Differential Equations</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/11-probabilistic-pca/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Probabilistic PCA</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/13-seasonal-time-series/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Bayesian Time Series Analysis</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/15-gaussian-processes/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction to Gaussian Processes</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/12-gplvm/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Gaussian Process Latent Variable Models</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="false">
 <span class="menu-text">For Developers (PPL)</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/docs-01-contributing-guide/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">How to Contribute</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/docs-05-for-developers-compiler/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Turing Compiler Design</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/14-minituring/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">A Mini Turing Implementation I: Compiler</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/16-contexts/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">A Mini Turing Implementation II: Contexts</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/docs-06-for-developers-interface/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Interface Guide</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true">
 <span class="menu-text">For Developers (Inference)</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth2 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/docs-04-for-developers-abstractmcmc-turing/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">How Turing implements AbstractMCMC</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/docs-07-for-developers-variational-inference/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Variational Inference</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/docs-17-implementing-samplers/index.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Implementing Samplers</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../versions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Versions</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../changelog.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Changelog</span></a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of Contents</h2>
   
  <ul>
  <li><a href="#quick-overview-of-mala" id="toc-quick-overview-of-mala" class="nav-link active" data-scroll-target="#quick-overview-of-mala">Quick overview of MALA</a></li>
  <li><a href="#what-we-need-from-a-model-logdensityproblems.jl" id="toc-what-we-need-from-a-model-logdensityproblems.jl" class="nav-link" data-scroll-target="#what-we-need-from-a-model-logdensityproblems.jl">What we need from a model: LogDensityProblems.jl</a></li>
  <li><a href="#implementing-mala-in-abstractmcmc.jl" id="toc-implementing-mala-in-abstractmcmc.jl" class="nav-link" data-scroll-target="#implementing-mala-in-abstractmcmc.jl">Implementing MALA in AbstractMCMC.jl</a></li>
  <li><a href="#using-our-sampler-with-turing.jl" id="toc-using-our-sampler-with-turing.jl" class="nav-link" data-scroll-target="#using-our-sampler-with-turing.jl">Using our sampler with Turing.jl</a>
  <ul class="collapse">
  <li><a href="#models-with-constrained-parameters" id="toc-models-with-constrained-parameters" class="nav-link" data-scroll-target="#models-with-constrained-parameters">Models with constrained parameters</a></li>
  </ul></li>
  <li><a href="#summary" id="toc-summary" class="nav-link" data-scroll-target="#summary">Summary</a></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/TuringLang/docs/edit/master/tutorials/docs-17-implementing-samplers/index.qmd" target="_blank" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/TuringLang/docs/issues/new" target="_blank" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item">Documentation</li><li class="breadcrumb-item"><a href="../../tutorials/docs-04-for-developers-abstractmcmc-turing/index.html">For Developers (Inference)</a></li><li class="breadcrumb-item"><a href="../../tutorials/docs-17-implementing-samplers/index.html">Implementing Samplers</a></li></ol></nav>
<div class="quarto-title">
<h1 class="title">Implementing samplers</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>In this tutorial, we’ll go through step-by-step how to implement a “simple” sampler in <a href="https://github.com/TuringLang/AbstractMCMC.jl">AbstractMCMC.jl</a> in such a way that it can be easily applied to Turing.jl models.</p>
<p>In particular, we’re going to implement a version of <strong>Metropolis-adjusted Langevin (MALA)</strong>.</p>
<p>Note that we will implement this sampler in the <a href="https://github.com/TuringLang/AbstractMCMC.jl">AbstractMCMC.jl</a> framework, completely “ignoring” Turing.jl until the very end of the tutorial, at which point we’ll use a single line of code to make the resulting sampler available to Turing.jl. This is to really drive home the point that one can implement samplers in a way that is accessible to all of Turing.jl’s users without having to use Turing.jl yourself.</p>
<section id="quick-overview-of-mala" class="level2">
<h2 class="anchored" data-anchor-id="quick-overview-of-mala">Quick overview of MALA</h2>
<p>We can view MALA as a single step of the leapfrog intergrator with resampling of momentum <span class="math inline">\(p\)</span> at every step.<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> To make that statement a bit more concrete, we first define the <em>extended</em> target <span class="math inline">\(\bar{\gamma}(x, p)\)</span> as</p>
<p><span class="math display">\[\begin{equation*}
\log \bar{\gamma}(x, p) \propto \log \gamma(x) + \log \gamma_{\mathcal{N}(0, M)}(p)
\end{equation*}\]</span></p>
<p>where <span class="math inline">\(\gamma_{\mathcal{N}(0, M)}\)</span> denotes the density for a zero-centered Gaussian with covariance matrix <span class="math inline">\(M\)</span>. We then consider targeting this joint distribution over both <span class="math inline">\(x\)</span> and <span class="math inline">\(p\)</span> as follows. First we define the map</p>
<p><span class="math display">\[\begin{equation*}
\begin{split}
  L_{\epsilon}: \quad &amp; \mathbb{R}^d \times \mathbb{R}^d \to \mathbb{R}^d \times \mathbb{R}^d \\
  &amp; (x, p) \mapsto (\tilde{x}, \tilde{p}) := L_{\epsilon}(x, p)
\end{split}
\end{equation*}\]</span></p>
<p>as</p>
<p><span class="math display">\[\begin{equation*}
\begin{split}
  p_{1 / 2} &amp;:= p + \frac{\epsilon}{2} \nabla \log \gamma(x) \\
  \tilde{x} &amp;:= x + \epsilon M^{-1} p_{1 /2 } \\
  p_1 &amp;:= p_{1 / 2} + \frac{\epsilon}{2} \nabla \log \gamma(\tilde{x}) \\
  \tilde{p} &amp;:= - p_1
\end{split}
\end{equation*}\]</span></p>
<p>This might be familiar for some readers as a single step of the Leapfrog integrator. We then define the MALA kernel as follows: given the current iterate <span class="math inline">\(x_i\)</span>, we sample the next iterate <span class="math inline">\(x_{i + 1}\)</span> as</p>
<p><span class="math display">\[\begin{equation*}
\begin{split}
  p &amp;\sim \mathcal{N}(0, M) \\
  (\tilde{x}, \tilde{p}) &amp;:= L_{\epsilon}(x_i, p) \\
  \alpha &amp;:= \min \left\{ 1, \frac{\bar{\gamma}(\tilde{x}, \tilde{p})}{\bar{\gamma}(x_i, p)} \right\} \\
  x_{i + 1} &amp;:=
  \begin{cases}
    \tilde{x} \quad &amp; \text{ with prob. } \alpha \\
    x_i       \quad &amp; \text{ with prob. } 1 - \alpha
  \end{cases}
\end{split}
\end{equation*}\]</span></p>
<p>i.e.&nbsp;we accept the proposal <span class="math inline">\(\tilde{x}\)</span> with probability <span class="math inline">\(\alpha\)</span> and reject it, thus sticking with our current iterate, with probability <span class="math inline">\(1 - \alpha\)</span>.</p>
</section>
<section id="what-we-need-from-a-model-logdensityproblems.jl" class="level2">
<h2 class="anchored" data-anchor-id="what-we-need-from-a-model-logdensityproblems.jl">What we need from a model: <a href="https://github.com/tpapp/LogDensityProblems.jl">LogDensityProblems.jl</a></h2>
<p>There are a few things we need from the “target” / “model” / density that we want to sample from:</p>
<ol type="1">
<li>We need access to log-density <em>evaluations</em> <span class="math inline">\(\log \gamma(x)\)</span> so we can compute the acceptance ratio involving <span class="math inline">\(\log \bar{\gamma}(x, p)\)</span>.</li>
<li>We need access to log-density <em>gradients</em> <span class="math inline">\(\nabla \log \gamma(x)\)</span> so we can compute the Leapfrog steps <span class="math inline">\(L_{\epsilon}(x, p)\)</span>.</li>
<li>We also need access to the “size” of the model so we can determine the size of <span class="math inline">\(M\)</span>.</li>
</ol>
<p>Luckily for us, there is a package called <a href="https://github.com/tpapp/LogDensityProblems.jl">LogDensityProblems.jl</a> which provides an interface for <em>exactly</em> this!</p>
<p>To demonstrate how one can implement the “<a href="https://github.com/tpapp/LogDensityProblems.jl">LogDensityProblems.jl</a> interface”<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a> we will use a simple Gaussian model as an example:</p>
<div id="4" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">LogDensityProblems</span>: LogDensityProblems;</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Let's define some type that represents the model.</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> IsotropicNormalModel{M<span class="op">&lt;:</span><span class="dt">AbstractVector{&lt;:Real}</span>}</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"mean of the isotropic Gaussian"</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>    mean<span class="op">::</span><span class="dt">M</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Specifies what input length the model expects.</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>LogDensityProblems.<span class="fu">dimension</span>(model<span class="op">::</span><span class="dt">IsotropicNormalModel</span>) <span class="op">=</span> <span class="fu">length</span>(model.mean)</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Implementation of the log-density evaluation of the model.</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> LogDensityProblems.<span class="fu">logdensity</span>(model<span class="op">::</span><span class="dt">IsotropicNormalModel</span>, x<span class="op">::</span><span class="dt">AbstractVector{&lt;:Real}</span>)</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">-</span> <span class="fu">sum</span>(abs2, x <span class="op">.-</span> model.mean) <span class="op">/</span> <span class="fl">2</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This gives us all of the properties we want for our MALA sampler with the exception of the computation of the <em>gradient</em> <span class="math inline">\(\nabla \log \gamma(x)\)</span>. There is the method <code>LogDensityProblems.logdensity_and_gradient</code> which should return a 2-tuple where the first entry is the evaluation of the logdensity <span class="math inline">\(\log \gamma(x)\)</span> and the second entry is the gradient <span class="math inline">\(\nabla \log \gamma(x)\)</span>.</p>
<p>There are two ways to “implement” this method: 1) we implement it by hand, which is feasible in the case of our <code>IsotropicNormalModel</code>, or b) we defer the implementation of this to a automatic differentiation backend.</p>
<p>To implement it by hand we can simply do</p>
<div id="6" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Tell LogDensityProblems.jl that first-order, i.e. gradient information, is available.</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>LogDensityProblems.<span class="fu">capabilities</span>(model<span class="op">::</span><span class="dt">IsotropicNormalModel</span>) <span class="op">=</span> LogDensityProblems.<span class="fu">LogDensityOrder</span><span class="dt">{1}</span>()</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Implement `logdensity_and_gradient`.</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> LogDensityProblems.<span class="fu">logdensity_and_gradient</span>(model<span class="op">::</span><span class="dt">IsotropicNormalModel</span>, x)</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>    logγ_x <span class="op">=</span> LogDensityProblems.<span class="fu">logdensity</span>(model, x)</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>    ∇logγ_x <span class="op">=</span> <span class="op">-</span>x <span class="op">.*</span> (x <span class="op">-</span> model.mean)</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> logγ_x, ∇logγ_x</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let’s just try it out:</p>
<div id="8" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Instantiate the problem.</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>model <span class="op">=</span> <span class="fu">IsotropicNormalModel</span>([<span class="op">-</span><span class="fl">5</span>., <span class="fl">0</span>., <span class="fl">5</span>.])</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Create some example input that we can test on.</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>x_example <span class="op">=</span> <span class="fu">randn</span>(LogDensityProblems.<span class="fu">dimension</span>(model))</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Evaluate!</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>LogDensityProblems.<span class="fu">logdensity</span>(model, x_example)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>-23.796497226128718</code></pre>
</div>
</div>
<p>To defer it to an automatic differentiation backend, we can do</p>
<div id="10" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Tell LogDensityProblems.jl we only have access to 0-th order information.</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>LogDensityProblems.<span class="fu">capabilities</span>(model<span class="op">::</span><span class="dt">IsotropicNormalModel</span>) <span class="op">=</span> LogDensityProblems.<span class="fu">LogDensityOrder</span><span class="dt">{0}</span>()</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Use `LogDensityProblemsAD`'s `ADgradient` in combination with some AD backend to implement `logdensity_and_gradient`.</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">LogDensityProblemsAD</span>, <span class="bu">ADTypes</span>, <span class="bu">ForwardDiff</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>model_with_grad <span class="op">=</span> <span class="fu">ADgradient</span>(<span class="fu">AutoForwardDiff</span>(), model)</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>LogDensityProblems.<span class="fu">logdensity</span>(model_with_grad, x_example)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>-23.796497226128718</code></pre>
</div>
</div>
<p>We’ll continue with the second approach in this tutorial since this is typically what one does in practice, because there are better hobbies to spend time on than deriving gradients by hand.</p>
<p>At this point, one might wonder how we’re going to tie this back to Turing.jl in the end. Effectively, when working with inference methods that only require log-density evaluations and / or higher-order information of the log-density, Turing.jl actually converts the user-provided <code>Model</code> into an object implementing the above methods for <a href="https://github.com/tpapp/LogDensityProblems.jl">LogDensityProblems.jl</a>. As a result, most samplers provided by Turing.jl are actually implemented to work with <a href="https://github.com/tpapp/LogDensityProblems.jl">LogDensityProblems.jl</a>, enabling their use both <em>within</em> Turing.jl and <em>outside</em> of Turing.jl! Morever, there exists similar conversions for Stan through BridgeStan and Stan<a href="https://github.com/tpapp/LogDensityProblems.jl">LogDensityProblems.jl</a>, which means that a sampler supporting the <a href="https://github.com/tpapp/LogDensityProblems.jl">LogDensityProblems.jl</a> interface can easily be used on both Turing.jl <em>and</em> Stan models (in addition to user-provided models, as our <code>IsotropicNormalModel</code> above)!</p>
<p>Anyways, let’s move on to actually implementing the sampler.</p>
</section>
<section id="implementing-mala-in-abstractmcmc.jl" class="level2">
<h2 class="anchored" data-anchor-id="implementing-mala-in-abstractmcmc.jl">Implementing MALA in <a href="https://github.com/TuringLang/AbstractMCMC.jl">AbstractMCMC.jl</a></h2>
<p>Now that we’ve established that a model implementing the <a href="https://github.com/tpapp/LogDensityProblems.jl">LogDensityProblems.jl</a> interface provides us with all the information we need from <span class="math inline">\(\log \gamma(x)\)</span>, we can address the question: given an object that implements the <a href="https://github.com/tpapp/LogDensityProblems.jl">LogDensityProblems.jl</a> interface, how can we define a sampler for it?</p>
<p>We’re going to do this by making our sampler a sub-type of <code>AbstractMCMC.AbstractSampler</code> in addition to implementing a few methods from <a href="https://github.com/TuringLang/AbstractMCMC.jl">AbstractMCMC.jl</a>. Why? Because it gets us <em>a lot</em> of functionality for free, as we will see later.</p>
<p>Moreover, <a href="https://github.com/TuringLang/AbstractMCMC.jl">AbstractMCMC.jl</a> provides a very natural interface for MCMC algorithms.</p>
<p>First, we’ll define our <code>MALA</code> type</p>
<div id="12" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">AbstractMCMC</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> MALA{T,A} <span class="op">&lt;:</span><span class="dt"> AbstractMCMC.AbstractSampler</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"stepsize used in the leapfrog step"</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>    ϵ_init<span class="op">::</span><span class="dt">T</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"covariance matrix used for the momentum"</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>    M_init<span class="op">::</span><span class="dt">A</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Notice how we’ve added the suffix <code>_init</code> to both the stepsize and the covariance matrix. We’ve done this because a <code>AbstractMCMC.AbstractSampler</code> should be <em>immutable</em>. Of course there might be many scenarios where we want to allow something like the stepsize and / or the covariance matrix to vary between iterations, e.g.&nbsp;during the burn-in / adaptation phase of the sampling process we might want to adjust the parameters using statistics computed from these initial iterations. But information which can change between iterations <em>should not go in the sampler itself</em>! Instead, this information should go in the sampler <em>state</em>.</p>
<p>The sampler state should at the very least contain all the necessary information to perform the next MCMC iteration, but usually contains further information, e.g.&nbsp;quantities and statistics useful for evaluating whether the sampler has converged.</p>
<p>We will use the following sampler state for our <code>MALA</code> sampler:</p>
<div id="14" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> MALAState{A<span class="op">&lt;:</span><span class="dt">AbstractVector{&lt;:Real}</span>}</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"current position"</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>    x<span class="op">::</span><span class="dt">A</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This might seem overly redundant: we’re defining a type <code>MALAState</code> and it only contains a simple vector of reals. In this particular case we indeed could have dropped this and simply used a <code>AbstractVector{&lt;:Real}</code> as our sampler state, but typically, as we will see later, one wants to include other quantities in the sampler state. For example, if we also wanted to adapt the parameters of our <code>MALA</code>, e.g.&nbsp;alter the stepsize depending on acceptance rates, in which case we should also put <code>ϵ</code> in the state, but for now we’ll keep things simple.</p>
<p>Moreover, we also want a <em>sample</em> type, which is a type meant for “public consumption”, i.e.&nbsp;the end-user. This is generally going to contain a subset of the information present in the state. But in such a simple scenario as this, we similarly only have a <code>AbstractVector{&lt;:Real}</code>:</p>
<div id="16" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> MALASample{A<span class="op">&lt;:</span><span class="dt">AbstractVector{&lt;:Real}</span>}</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"current position"</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>    x<span class="op">::</span><span class="dt">A</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We currently have three things:</p>
<ol type="1">
<li>A <code>AbstractMCMC.AbstractSampler</code> implementation called <code>MALA</code>.</li>
<li>A state <code>MALAState</code> for our sampler <code>MALA</code>.</li>
<li>A sample <code>MALASample</code> for our sampler <code>MALA</code>.</li>
</ol>
<p>That means that we’re ready to implement the only thing that really matters: <code>AbstractMCMC.step</code>.</p>
<p><code>AbstractMCMC.step</code> defines the MCMC iteration of our <code>MALA</code> given the current <code>MALAState</code>. Specifically, the signature of the function is as follows:</p>
<div id="18" class="cell" data-execution_count="0">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> AbstractMCMC.<span class="fu">step</span>(</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>    <span class="co"># The RNG to ensure reproducibility.</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>    rng<span class="op">::</span><span class="dt">Random.AbstractRNG</span>,</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># The model that defines our target.</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>    model<span class="op">::</span><span class="dt">AbstractMCMC.AbstractModel</span>,</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># The sampler for which we're taking a `step`.</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>    sampler<span class="op">::</span><span class="dt">AbstractMCMC.AbstractSampler</span>,</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>    <span class="co"># The current sampler `state`.</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>    state;</span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Additional keyword arguments that we may or may not need.</span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>    kwargs<span class="op">...</span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Moreover, there is a specific <code>AbstractMCMC.AbstractModel</code> which is used to indicate that the model that is provided implements the <a href="https://github.com/tpapp/LogDensityProblems.jl">LogDensityProblems.jl</a> interface: <code>AbstractMCMC.LogDensityModel</code>.</p>
<p>Since, as we discussed earlier, in our case we’re indeed going to work with types that support the <a href="https://github.com/tpapp/LogDensityProblems.jl">LogDensityProblems.jl</a> interface, we’ll define <code>AbstractMCMC.step</code> for such a <code>AbstractMCMC.LogDensityModel</code>.</p>
<p>Note that <code>AbstractMCMC.LogDensityModel</code> has no other purpose; it has a single field called <code>logdensity</code>, and it does nothing else. But by wrapping the model in <code>AbstractMCMC.LogDensityModel</code>, it allows samplers that want to work with <a href="https://github.com/tpapp/LogDensityProblems.jl">LogDensityProblems.jl</a> to define their <code>AbstractMCMC.step</code> on this type without running into method ambiguities.</p>
<p>All in all, that means that the signature for our <code>AbstractMCMC.step</code> is going to be the following:</p>
<div id="20" class="cell" data-execution_count="0">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> AbstractMCMC.<span class="fu">step</span>(</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>    rng<span class="op">::</span><span class="dt">Random.AbstractRNG</span>,</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># `LogDensityModel` so we know we're working with LogDensityProblems.jl model.</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>    model<span class="op">::</span><span class="dt">AbstractMCMC.LogDensityModel</span>,</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Our sampler.</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>    sampler<span class="op">::</span><span class="dt">MALA</span>,</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Our sampler state.</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>    state<span class="op">::</span><span class="dt">MALAState</span>;</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>    kwargs<span class="op">...</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Great! Now let’s actually implement the full <code>AbstractMCMC.step</code> for our <code>MALA</code>.</p>
<p>Let’s remind ourselves what we’re going to do:</p>
<ol type="1">
<li>Sample a new momentum <span class="math inline">\(p\)</span>.</li>
<li>Compute the log-density of the extended target <span class="math inline">\(\log \bar{\gamma}(x, p)\)</span>.</li>
<li>Take a single leapfrog step <span class="math inline">\((\tilde{x}, \tilde{p}) = L_{\epsilon}(x, p)\)</span>.</li>
<li>Accept or reject the proposed <span class="math inline">\((\tilde{x}, \tilde{p})\)</span>.</li>
</ol>
<p>All in all, this results in the following:</p>
<div id="22" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">Random</span>: Random</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">Distributions</span>  <span class="co"># so we get the `MvNormal`</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> AbstractMCMC.<span class="fu">step</span>(</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>    rng<span class="op">::</span><span class="dt">Random.AbstractRNG</span>,</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>    model_wrapper<span class="op">::</span><span class="dt">AbstractMCMC.LogDensityModel</span>,</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>    sampler<span class="op">::</span><span class="dt">MALA</span>,</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>    state<span class="op">::</span><span class="dt">MALAState</span>;</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>    kwargs<span class="op">...</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Extract the wrapped model which implements LogDensityProblems.jl.</span></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>    model <span class="op">=</span> model_wrapper.logdensity</span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Let's just extract the sampler parameters to make our lives easier.</span></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>    ϵ <span class="op">=</span> sampler.ϵ_init</span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>    M <span class="op">=</span> sampler.M_init</span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Extract the current parameters.</span></span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>    x <span class="op">=</span> state.x</span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Sample the momentum.</span></span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a>    p_dist <span class="op">=</span> <span class="fu">MvNormal</span>(<span class="fu">zeros</span>(LogDensityProblems.<span class="fu">dimension</span>(model)), M)</span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>    p <span class="op">=</span> <span class="fu">rand</span>(rng, p_dist)</span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Propose using a single leapfrog step.</span></span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a>    x̃, p̃ <span class="op">=</span> <span class="fu">leapfrog_step</span>(model, x, p, ϵ, M)</span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Accept or reject proposal.</span></span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a>    logp <span class="op">=</span> LogDensityProblems.<span class="fu">logdensity</span>(model, x) <span class="op">+</span> <span class="fu">logpdf</span>(p_dist, p)</span>
<span id="cb12-25"><a href="#cb12-25" aria-hidden="true" tabindex="-1"></a>    logp̃ <span class="op">=</span> LogDensityProblems.<span class="fu">logdensity</span>(model, x̃) <span class="op">+</span> <span class="fu">logpdf</span>(p_dist, p̃)</span>
<span id="cb12-26"><a href="#cb12-26" aria-hidden="true" tabindex="-1"></a>    logα <span class="op">=</span> logp̃ <span class="op">-</span> logp</span>
<span id="cb12-27"><a href="#cb12-27" aria-hidden="true" tabindex="-1"></a>    state_new <span class="op">=</span> <span class="cf">if</span> <span class="fu">log</span>(<span class="fu">rand</span>(rng)) <span class="op">&lt;</span> logα</span>
<span id="cb12-28"><a href="#cb12-28" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Accept.</span></span>
<span id="cb12-29"><a href="#cb12-29" aria-hidden="true" tabindex="-1"></a>        <span class="fu">MALAState</span>(x̃)</span>
<span id="cb12-30"><a href="#cb12-30" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span></span>
<span id="cb12-31"><a href="#cb12-31" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Reject.</span></span>
<span id="cb12-32"><a href="#cb12-32" aria-hidden="true" tabindex="-1"></a>        <span class="fu">MALAState</span>(x)</span>
<span id="cb12-33"><a href="#cb12-33" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb12-34"><a href="#cb12-34" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Return the "sample" and the sampler state.</span></span>
<span id="cb12-35"><a href="#cb12-35" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="fu">MALASample</span>(state_new.x), state_new</span>
<span id="cb12-36"><a href="#cb12-36" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Fairly straight-forward.</p>
<p>Of course, we haven’t defined the <code>leapfrog_step</code> method yet, so let’s do that:</p>
<div id="24" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">leapfrog_step</span>(model, x, p, ϵ, M)</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Update momentum `p` using "position" `x`.</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>    ∇logγ_x <span class="op">=</span> <span class="fu">last</span>(LogDensityProblems.<span class="fu">logdensity_and_gradient</span>(model, x))</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>    p1 <span class="op">=</span> p <span class="op">+</span> (ϵ <span class="op">/</span> <span class="fl">2</span>) <span class="op">.*</span> ∇logγ_x</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Update the "position" `x` using momentum `p1`.</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>    x̃ <span class="op">=</span> x <span class="op">+</span> ϵ <span class="op">.*</span> (M <span class="op">\</span> p1)</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Update momentum `p1` using position `x̃`</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>    ∇logγ_x̃ <span class="op">=</span> <span class="fu">last</span>(LogDensityProblems.<span class="fu">logdensity_and_gradient</span>(model, x̃))</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>    p2 <span class="op">=</span> p1 <span class="op">+</span> (ϵ <span class="op">/</span> <span class="fl">2</span>) <span class="op">.*</span> ∇logγ_x̃</span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Flip momentum `p2`.</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>    p̃ <span class="op">=</span> <span class="op">-</span>p2</span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> x̃, p̃</span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>leapfrog_step (generic function with 1 method)</code></pre>
</div>
</div>
<p>With all of this, we’re technically ready to sample!</p>
<div id="26" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">Random</span>, <span class="bu">LinearAlgebra</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>rng <span class="op">=</span> <span class="bu">Random</span>.<span class="fu">default_rng</span>()</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>sampler <span class="op">=</span> <span class="fu">MALA</span>(<span class="fl">1</span>, I)</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>state <span class="op">=</span> <span class="fu">MALAState</span>(<span class="fu">zeros</span>(LogDensityProblems.<span class="fu">dimension</span>(model)))</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>x_next, state_next <span class="op">=</span> AbstractMCMC.<span class="fu">step</span>(</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>    rng,</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>    AbstractMCMC.<span class="fu">LogDensityModel</span>(model),</span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>    sampler,</span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>    state</span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>(MALASample{Vector{Float64}}([-0.5237897299551858, -0.5436405172590401, 0.3894968185191226]), MALAState{Vector{Float64}}([-0.5237897299551858, -0.5436405172590401, 0.3894968185191226]))</code></pre>
</div>
</div>
<p>Great, it works!</p>
<p>And I promised we would get quite some functionality for free if we implemented <code>AbstractMCMC.step</code>, and so we can now simply call <code>sample</code> to perform standard MCMC sampling:</p>
<div id="28" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform 1000 iterations with our `MALA` sampler.</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>samples <span class="op">=</span> <span class="fu">sample</span>(model_with_grad, sampler, <span class="fl">10_000</span>; initial_state<span class="op">=</span>state, progress<span class="op">=</span><span class="cn">false</span>)</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Concatenate into a matrix.</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>samples_matrix <span class="op">=</span> <span class="fu">stack</span>(sample <span class="op">-&gt;</span> sample.x, samples)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>3×10000 Matrix{Float64}:
 -1.55939  -3.60718    -3.61608    …  -4.82849    -5.29126   -4.59624
  1.09901   0.0363833  -0.0176134     -0.0100939  -0.727293  -1.8772
  2.77285   4.4812      3.83114        6.44702     5.5667     4.95981</code></pre>
</div>
</div>
<div id="30" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute the marginal means and standard deviations.</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="fu">hcat</span>(<span class="fu">mean</span>(samples_matrix; dims<span class="op">=</span><span class="fl">2</span>), <span class="fu">std</span>(samples_matrix; dims<span class="op">=</span><span class="fl">2</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>3×2 Matrix{Float64}:
 -4.99422     1.00736
  0.00577757  1.00276
  5.02457     0.996166</code></pre>
</div>
</div>
<p>Let’s visualize the samples</p>
<div id="32" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">StatsPlots</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">transpose</span>(samples_matrix[<span class="op">:</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">:</span><span class="kw">end</span>]), alpha<span class="op">=</span><span class="fl">0.5</span>, legend<span class="op">=</span><span class="cn">false</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<!--?xml version="1.0" encoding="utf-8"?-->
<svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" width="672" height="480" viewbox="0 0 2688 1920">
<defs>
  <clippath id="clip830">
    <rect x="0" y="0" width="2688" height="1920"></rect>
  </clippath>
</defs>
<path clip-path="url(#clip830)" d="M0 1920 L2688 1920 L2688 0 L0 0  Z" fill="#ffffff" fill-rule="evenodd" fill-opacity="1"></path>
<defs>
  <clippath id="clip831">
    <rect x="537" y="0" width="1883" height="1883"></rect>
  </clippath>
</defs>
<path clip-path="url(#clip830)" d="M196.816 1800.78 L2640.76 1800.78 L2640.76 47.2441 L196.816 47.2441  Z" fill="#ffffff" fill-rule="evenodd" fill-opacity="1"></path>
<defs>
  <clippath id="clip832">
    <rect x="196" y="47" width="2445" height="1755"></rect>
  </clippath>
</defs>
<polyline clip-path="url(#clip832)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="263.676,1800.78 263.676,47.2441 "></polyline>
<polyline clip-path="url(#clip832)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="840.654,1800.78 840.654,47.2441 "></polyline>
<polyline clip-path="url(#clip832)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="1417.63,1800.78 1417.63,47.2441 "></polyline>
<polyline clip-path="url(#clip832)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="1994.61,1800.78 1994.61,47.2441 "></polyline>
<polyline clip-path="url(#clip832)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="2571.59,1800.78 2571.59,47.2441 "></polyline>
<polyline clip-path="url(#clip830)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="196.816,1800.78 2640.76,1800.78 "></polyline>
<polyline clip-path="url(#clip830)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="263.676,1800.78 263.676,1781.88 "></polyline>
<polyline clip-path="url(#clip830)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="840.654,1800.78 840.654,1781.88 "></polyline>
<polyline clip-path="url(#clip830)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="1417.63,1800.78 1417.63,1781.88 "></polyline>
<polyline clip-path="url(#clip830)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="1994.61,1800.78 1994.61,1781.88 "></polyline>
<polyline clip-path="url(#clip830)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="2571.59,1800.78 2571.59,1781.88 "></polyline>
<path clip-path="url(#clip830)" d="M263.676 1834 Q260.065 1834 258.236 1837.57 Q256.431 1841.11 256.431 1848.24 Q256.431 1855.34 258.236 1858.91 Q260.065 1862.45 263.676 1862.45 Q267.31 1862.45 269.116 1858.91 Q270.945 1855.34 270.945 1848.24 Q270.945 1841.11 269.116 1837.57 Q267.31 1834 263.676 1834 M263.676 1830.3 Q269.486 1830.3 272.542 1834.9 Q275.621 1839.49 275.621 1848.24 Q275.621 1856.96 272.542 1861.57 Q269.486 1866.15 263.676 1866.15 Q257.866 1866.15 254.787 1861.57 Q251.732 1856.96 251.732 1848.24 Q251.732 1839.49 254.787 1834.9 Q257.866 1830.3 263.676 1830.3 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip830)" d="M804.346 1861.55 L820.666 1861.55 L820.666 1865.48 L798.721 1865.48 L798.721 1861.55 Q801.383 1858.79 805.967 1854.16 Q810.573 1849.51 811.754 1848.17 Q813.999 1845.65 814.879 1843.91 Q815.782 1842.15 815.782 1840.46 Q815.782 1837.71 813.837 1835.97 Q811.916 1834.23 808.814 1834.23 Q806.615 1834.23 804.161 1835 Q801.731 1835.76 798.953 1837.31 L798.953 1832.59 Q801.777 1831.46 804.231 1830.88 Q806.684 1830.3 808.721 1830.3 Q814.092 1830.3 817.286 1832.98 Q820.481 1835.67 820.481 1840.16 Q820.481 1842.29 819.67 1844.21 Q818.883 1846.11 816.777 1848.7 Q816.198 1849.37 813.096 1852.59 Q809.995 1855.78 804.346 1861.55 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip830)" d="M830.527 1830.92 L848.883 1830.92 L848.883 1834.86 L834.809 1834.86 L834.809 1843.33 Q835.828 1842.98 836.846 1842.82 Q837.865 1842.64 838.883 1842.64 Q844.67 1842.64 848.05 1845.81 Q851.43 1848.98 851.43 1854.4 Q851.43 1859.97 847.957 1863.08 Q844.485 1866.15 838.166 1866.15 Q835.99 1866.15 833.721 1865.78 Q831.476 1865.41 829.069 1864.67 L829.069 1859.97 Q831.152 1861.11 833.374 1861.66 Q835.596 1862.22 838.073 1862.22 Q842.078 1862.22 844.416 1860.11 Q846.754 1858.01 846.754 1854.4 Q846.754 1850.78 844.416 1848.68 Q842.078 1846.57 838.073 1846.57 Q836.198 1846.57 834.323 1846.99 Q832.471 1847.4 830.527 1848.28 L830.527 1830.92 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip830)" d="M870.642 1834 Q867.031 1834 865.203 1837.57 Q863.397 1841.11 863.397 1848.24 Q863.397 1855.34 865.203 1858.91 Q867.031 1862.45 870.642 1862.45 Q874.277 1862.45 876.082 1858.91 Q877.911 1855.34 877.911 1848.24 Q877.911 1841.11 876.082 1837.57 Q874.277 1834 870.642 1834 M870.642 1830.3 Q876.453 1830.3 879.508 1834.9 Q882.587 1839.49 882.587 1848.24 Q882.587 1856.96 879.508 1861.57 Q876.453 1866.15 870.642 1866.15 Q864.832 1866.15 861.754 1861.57 Q858.698 1856.96 858.698 1848.24 Q858.698 1839.49 861.754 1834.9 Q864.832 1830.3 870.642 1830.3 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip830)" d="M1377.25 1830.92 L1395.61 1830.92 L1395.61 1834.86 L1381.53 1834.86 L1381.53 1843.33 Q1382.55 1842.98 1383.57 1842.82 Q1384.59 1842.64 1385.61 1842.64 Q1391.39 1842.64 1394.77 1845.81 Q1398.15 1848.98 1398.15 1854.4 Q1398.15 1859.97 1394.68 1863.08 Q1391.21 1866.15 1384.89 1866.15 Q1382.71 1866.15 1380.44 1865.78 Q1378.2 1865.41 1375.79 1864.67 L1375.79 1859.97 Q1377.88 1861.11 1380.1 1861.66 Q1382.32 1862.22 1384.8 1862.22 Q1388.8 1862.22 1391.14 1860.11 Q1393.48 1858.01 1393.48 1854.4 Q1393.48 1850.78 1391.14 1848.68 Q1388.8 1846.57 1384.8 1846.57 Q1382.92 1846.57 1381.05 1846.99 Q1379.19 1847.4 1377.25 1848.28 L1377.25 1830.92 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip830)" d="M1417.37 1834 Q1413.75 1834 1411.93 1837.57 Q1410.12 1841.11 1410.12 1848.24 Q1410.12 1855.34 1411.93 1858.91 Q1413.75 1862.45 1417.37 1862.45 Q1421 1862.45 1422.81 1858.91 Q1424.63 1855.34 1424.63 1848.24 Q1424.63 1841.11 1422.81 1837.57 Q1421 1834 1417.37 1834 M1417.37 1830.3 Q1423.18 1830.3 1426.23 1834.9 Q1429.31 1839.49 1429.31 1848.24 Q1429.31 1856.96 1426.23 1861.57 Q1423.18 1866.15 1417.37 1866.15 Q1411.56 1866.15 1408.48 1861.57 Q1405.42 1856.96 1405.42 1848.24 Q1405.42 1839.49 1408.48 1834.9 Q1411.56 1830.3 1417.37 1830.3 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip830)" d="M1447.53 1834 Q1443.92 1834 1442.09 1837.57 Q1440.28 1841.11 1440.28 1848.24 Q1440.28 1855.34 1442.09 1858.91 Q1443.92 1862.45 1447.53 1862.45 Q1451.16 1862.45 1452.97 1858.91 Q1454.8 1855.34 1454.8 1848.24 Q1454.8 1841.11 1452.97 1837.57 Q1451.16 1834 1447.53 1834 M1447.53 1830.3 Q1453.34 1830.3 1456.39 1834.9 Q1459.47 1839.49 1459.47 1848.24 Q1459.47 1856.96 1456.39 1861.57 Q1453.34 1866.15 1447.53 1866.15 Q1441.72 1866.15 1438.64 1861.57 Q1435.58 1856.96 1435.58 1848.24 Q1435.58 1839.49 1438.64 1834.9 Q1441.72 1830.3 1447.53 1830.3 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip830)" d="M1952.89 1830.92 L1975.11 1830.92 L1975.11 1832.91 L1962.56 1865.48 L1957.68 1865.48 L1969.48 1834.86 L1952.89 1834.86 L1952.89 1830.92 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip830)" d="M1984.27 1830.92 L2002.63 1830.92 L2002.63 1834.86 L1988.56 1834.86 L1988.56 1843.33 Q1989.58 1842.98 1990.59 1842.82 Q1991.61 1842.64 1992.63 1842.64 Q1998.42 1842.64 2001.8 1845.81 Q2005.18 1848.98 2005.18 1854.4 Q2005.18 1859.97 2001.7 1863.08 Q1998.23 1866.15 1991.91 1866.15 Q1989.74 1866.15 1987.47 1865.78 Q1985.22 1865.41 1982.82 1864.67 L1982.82 1859.97 Q1984.9 1861.11 1987.12 1861.66 Q1989.34 1862.22 1991.82 1862.22 Q1995.83 1862.22 1998.16 1860.11 Q2000.5 1858.01 2000.5 1854.4 Q2000.5 1850.78 1998.16 1848.68 Q1995.83 1846.57 1991.82 1846.57 Q1989.95 1846.57 1988.07 1846.99 Q1986.22 1847.4 1984.27 1848.28 L1984.27 1830.92 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip830)" d="M2024.39 1834 Q2020.78 1834 2018.95 1837.57 Q2017.14 1841.11 2017.14 1848.24 Q2017.14 1855.34 2018.95 1858.91 Q2020.78 1862.45 2024.39 1862.45 Q2028.02 1862.45 2029.83 1858.91 Q2031.66 1855.34 2031.66 1848.24 Q2031.66 1841.11 2029.83 1837.57 Q2028.02 1834 2024.39 1834 M2024.39 1830.3 Q2030.2 1830.3 2033.26 1834.9 Q2036.33 1839.49 2036.33 1848.24 Q2036.33 1856.96 2033.26 1861.57 Q2030.2 1866.15 2024.39 1866.15 Q2018.58 1866.15 2015.5 1861.57 Q2012.45 1856.96 2012.45 1848.24 Q2012.45 1839.49 2015.5 1834.9 Q2018.58 1830.3 2024.39 1830.3 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip830)" d="M2516.11 1861.55 L2523.75 1861.55 L2523.75 1835.18 L2515.44 1836.85 L2515.44 1832.59 L2523.71 1830.92 L2528.38 1830.92 L2528.38 1861.55 L2536.02 1861.55 L2536.02 1865.48 L2516.11 1865.48 L2516.11 1861.55 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip830)" d="M2555.47 1834 Q2551.85 1834 2550.03 1837.57 Q2548.22 1841.11 2548.22 1848.24 Q2548.22 1855.34 2550.03 1858.91 Q2551.85 1862.45 2555.47 1862.45 Q2559.1 1862.45 2560.9 1858.91 Q2562.73 1855.34 2562.73 1848.24 Q2562.73 1841.11 2560.9 1837.57 Q2559.1 1834 2555.47 1834 M2555.47 1830.3 Q2561.28 1830.3 2564.33 1834.9 Q2567.41 1839.49 2567.41 1848.24 Q2567.41 1856.96 2564.33 1861.57 Q2561.28 1866.15 2555.47 1866.15 Q2549.66 1866.15 2546.58 1861.57 Q2543.52 1856.96 2543.52 1848.24 Q2543.52 1839.49 2546.58 1834.9 Q2549.66 1830.3 2555.47 1830.3 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip830)" d="M2585.63 1834 Q2582.02 1834 2580.19 1837.57 Q2578.38 1841.11 2578.38 1848.24 Q2578.38 1855.34 2580.19 1858.91 Q2582.02 1862.45 2585.63 1862.45 Q2589.26 1862.45 2591.07 1858.91 Q2592.9 1855.34 2592.9 1848.24 Q2592.9 1841.11 2591.07 1837.57 Q2589.26 1834 2585.63 1834 M2585.63 1830.3 Q2591.44 1830.3 2594.49 1834.9 Q2597.57 1839.49 2597.57 1848.24 Q2597.57 1856.96 2594.49 1861.57 Q2591.44 1866.15 2585.63 1866.15 Q2579.82 1866.15 2576.74 1861.57 Q2573.68 1856.96 2573.68 1848.24 Q2573.68 1839.49 2576.74 1834.9 Q2579.82 1830.3 2585.63 1830.3 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip830)" d="M2615.79 1834 Q2612.18 1834 2610.35 1837.57 Q2608.54 1841.11 2608.54 1848.24 Q2608.54 1855.34 2610.35 1858.91 Q2612.18 1862.45 2615.79 1862.45 Q2619.42 1862.45 2621.23 1858.91 Q2623.06 1855.34 2623.06 1848.24 Q2623.06 1841.11 2621.23 1837.57 Q2619.42 1834 2615.79 1834 M2615.79 1830.3 Q2621.6 1830.3 2624.65 1834.9 Q2627.73 1839.49 2627.73 1848.24 Q2627.73 1856.96 2624.65 1861.57 Q2621.6 1866.15 2615.79 1866.15 Q2609.98 1866.15 2606.9 1861.57 Q2603.84 1856.96 2603.84 1848.24 Q2603.84 1839.49 2606.9 1834.9 Q2609.98 1830.3 2615.79 1830.3 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><polyline clip-path="url(#clip832)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="196.816,1637.43 2640.76,1637.43 "></polyline>
<polyline clip-path="url(#clip832)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="196.816,1389.5 2640.76,1389.5 "></polyline>
<polyline clip-path="url(#clip832)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="196.816,1141.57 2640.76,1141.57 "></polyline>
<polyline clip-path="url(#clip832)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="196.816,893.641 2640.76,893.641 "></polyline>
<polyline clip-path="url(#clip832)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="196.816,645.712 2640.76,645.712 "></polyline>
<polyline clip-path="url(#clip832)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="196.816,397.783 2640.76,397.783 "></polyline>
<polyline clip-path="url(#clip832)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="196.816,149.854 2640.76,149.854 "></polyline>
<polyline clip-path="url(#clip830)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="196.816,1800.78 196.816,47.2441 "></polyline>
<polyline clip-path="url(#clip830)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="196.816,1637.43 215.714,1637.43 "></polyline>
<polyline clip-path="url(#clip830)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="196.816,1389.5 215.714,1389.5 "></polyline>
<polyline clip-path="url(#clip830)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="196.816,1141.57 215.714,1141.57 "></polyline>
<polyline clip-path="url(#clip830)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="196.816,893.641 215.714,893.641 "></polyline>
<polyline clip-path="url(#clip830)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="196.816,645.712 215.714,645.712 "></polyline>
<polyline clip-path="url(#clip830)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="196.816,397.783 215.714,397.783 "></polyline>
<polyline clip-path="url(#clip830)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="196.816,149.854 215.714,149.854 "></polyline>
<path clip-path="url(#clip830)" d="M50.5475 1637.88 L80.2233 1637.88 L80.2233 1641.81 L50.5475 1641.81 L50.5475 1637.88 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip830)" d="M89.1352 1620.15 L111.357 1620.15 L111.357 1622.14 L98.8111 1654.71 L93.9269 1654.71 L105.732 1624.08 L89.1352 1624.08 L89.1352 1620.15 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip830)" d="M120.478 1648.83 L125.362 1648.83 L125.362 1654.71 L120.478 1654.71 L120.478 1648.83 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip830)" d="M135.593 1620.15 L153.95 1620.15 L153.95 1624.08 L139.876 1624.08 L139.876 1632.55 Q140.894 1632.21 141.913 1632.05 Q142.931 1631.86 143.95 1631.86 Q149.737 1631.86 153.116 1635.03 Q156.496 1638.2 156.496 1643.62 Q156.496 1649.2 153.024 1652.3 Q149.552 1655.38 143.232 1655.38 Q141.056 1655.38 138.788 1655.01 Q136.542 1654.64 134.135 1653.9 L134.135 1649.2 Q136.218 1650.33 138.441 1650.89 Q140.663 1651.44 143.14 1651.44 Q147.144 1651.44 149.482 1649.34 Q151.82 1647.23 151.82 1643.62 Q151.82 1640.01 149.482 1637.9 Q147.144 1635.8 143.14 1635.8 Q141.265 1635.8 139.39 1636.21 Q137.538 1636.63 135.593 1637.51 L135.593 1620.15 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip830)" d="M49.5521 1389.95 L79.2279 1389.95 L79.2279 1393.89 L49.5521 1393.89 L49.5521 1389.95 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip830)" d="M89.3667 1372.22 L107.723 1372.22 L107.723 1376.15 L93.6491 1376.15 L93.6491 1384.63 Q94.6676 1384.28 95.6861 1384.12 Q96.7047 1383.93 97.7232 1383.93 Q103.51 1383.93 106.89 1387.1 Q110.269 1390.27 110.269 1395.69 Q110.269 1401.27 106.797 1404.37 Q103.325 1407.45 97.0056 1407.45 Q94.8297 1407.45 92.5612 1407.08 Q90.3158 1406.71 87.9084 1405.97 L87.9084 1401.27 Q89.9917 1402.4 92.2139 1402.96 Q94.4361 1403.51 96.913 1403.51 Q100.918 1403.51 103.256 1401.41 Q105.593 1399.3 105.593 1395.69 Q105.593 1392.08 103.256 1389.97 Q100.918 1387.87 96.913 1387.87 Q95.038 1387.87 93.163 1388.28 Q91.3112 1388.7 89.3667 1389.58 L89.3667 1372.22 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip830)" d="M119.482 1400.9 L124.367 1400.9 L124.367 1406.78 L119.482 1406.78 L119.482 1400.9 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip830)" d="M144.552 1375.3 Q140.941 1375.3 139.112 1378.86 Q137.306 1382.4 137.306 1389.53 Q137.306 1396.64 139.112 1400.2 Q140.941 1403.75 144.552 1403.75 Q148.186 1403.75 149.991 1400.2 Q151.82 1396.64 151.82 1389.53 Q151.82 1382.4 149.991 1378.86 Q148.186 1375.3 144.552 1375.3 M144.552 1371.59 Q150.362 1371.59 153.417 1376.2 Q156.496 1380.78 156.496 1389.53 Q156.496 1398.26 153.417 1402.87 Q150.362 1407.45 144.552 1407.45 Q138.741 1407.45 135.663 1402.87 Q132.607 1398.26 132.607 1389.53 Q132.607 1380.78 135.663 1376.2 Q138.741 1371.59 144.552 1371.59 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip830)" d="M50.5475 1142.02 L80.2233 1142.02 L80.2233 1145.96 L50.5475 1145.96 L50.5475 1142.02 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip830)" d="M94.3436 1154.91 L110.663 1154.91 L110.663 1158.85 L88.7186 1158.85 L88.7186 1154.91 Q91.3806 1152.16 95.9639 1147.53 Q100.57 1142.88 101.751 1141.53 Q103.996 1139.01 104.876 1137.28 Q105.779 1135.52 105.779 1133.83 Q105.779 1131.07 103.834 1129.34 Q101.913 1127.6 98.8111 1127.6 Q96.6121 1127.6 94.1584 1128.36 Q91.7278 1129.13 88.9501 1130.68 L88.9501 1125.96 Q91.7741 1124.82 94.2278 1124.24 Q96.6815 1123.66 98.7185 1123.66 Q104.089 1123.66 107.283 1126.35 Q110.478 1129.03 110.478 1133.53 Q110.478 1135.66 109.668 1137.58 Q108.881 1139.47 106.774 1142.07 Q106.195 1142.74 103.094 1145.96 Q99.9917 1149.15 94.3436 1154.91 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip830)" d="M120.478 1152.97 L125.362 1152.97 L125.362 1158.85 L120.478 1158.85 L120.478 1152.97 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip830)" d="M135.593 1124.29 L153.95 1124.29 L153.95 1128.22 L139.876 1128.22 L139.876 1136.7 Q140.894 1136.35 141.913 1136.19 Q142.931 1136 143.95 1136 Q149.737 1136 153.116 1139.17 Q156.496 1142.35 156.496 1147.76 Q156.496 1153.34 153.024 1156.44 Q149.552 1159.52 143.232 1159.52 Q141.056 1159.52 138.788 1159.15 Q136.542 1158.78 134.135 1158.04 L134.135 1153.34 Q136.218 1154.47 138.441 1155.03 Q140.663 1155.59 143.14 1155.59 Q147.144 1155.59 149.482 1153.48 Q151.82 1151.37 151.82 1147.76 Q151.82 1144.15 149.482 1142.04 Q147.144 1139.94 143.14 1139.94 Q141.265 1139.94 139.39 1140.35 Q137.538 1140.77 135.593 1141.65 L135.593 1124.29 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip830)" d="M99.3204 879.439 Q95.7093 879.439 93.8806 883.004 Q92.075 886.546 92.075 893.675 Q92.075 900.782 93.8806 904.347 Q95.7093 907.888 99.3204 907.888 Q102.955 907.888 104.76 904.347 Q106.589 900.782 106.589 893.675 Q106.589 886.546 104.76 883.004 Q102.955 879.439 99.3204 879.439 M99.3204 875.736 Q105.131 875.736 108.186 880.342 Q111.265 884.925 111.265 893.675 Q111.265 902.402 108.186 907.009 Q105.131 911.592 99.3204 911.592 Q93.5102 911.592 90.4315 907.009 Q87.376 902.402 87.376 893.675 Q87.376 884.925 90.4315 880.342 Q93.5102 875.736 99.3204 875.736 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip830)" d="M119.482 905.041 L124.367 905.041 L124.367 910.921 L119.482 910.921 L119.482 905.041 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip830)" d="M144.552 879.439 Q140.941 879.439 139.112 883.004 Q137.306 886.546 137.306 893.675 Q137.306 900.782 139.112 904.347 Q140.941 907.888 144.552 907.888 Q148.186 907.888 149.991 904.347 Q151.82 900.782 151.82 893.675 Q151.82 886.546 149.991 883.004 Q148.186 879.439 144.552 879.439 M144.552 875.736 Q150.362 875.736 153.417 880.342 Q156.496 884.925 156.496 893.675 Q156.496 902.402 153.417 907.009 Q150.362 911.592 144.552 911.592 Q138.741 911.592 135.663 907.009 Q132.607 902.402 132.607 893.675 Q132.607 884.925 135.663 880.342 Q138.741 875.736 144.552 875.736 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip830)" d="M94.3436 659.056 L110.663 659.056 L110.663 662.992 L88.7186 662.992 L88.7186 659.056 Q91.3806 656.302 95.9639 651.672 Q100.57 647.02 101.751 645.677 Q103.996 643.154 104.876 641.418 Q105.779 639.658 105.779 637.969 Q105.779 635.214 103.834 633.478 Q101.913 631.742 98.8111 631.742 Q96.6121 631.742 94.1584 632.506 Q91.7278 633.27 88.9501 634.821 L88.9501 630.098 Q91.7741 628.964 94.2278 628.385 Q96.6815 627.807 98.7185 627.807 Q104.089 627.807 107.283 630.492 Q110.478 633.177 110.478 637.668 Q110.478 639.797 109.668 641.719 Q108.881 643.617 106.774 646.209 Q106.195 646.881 103.094 650.098 Q99.9917 653.293 94.3436 659.056 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip830)" d="M120.478 657.112 L125.362 657.112 L125.362 662.992 L120.478 662.992 L120.478 657.112 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip830)" d="M135.593 628.432 L153.95 628.432 L153.95 632.367 L139.876 632.367 L139.876 640.839 Q140.894 640.492 141.913 640.33 Q142.931 640.145 143.95 640.145 Q149.737 640.145 153.116 643.316 Q156.496 646.487 156.496 651.904 Q156.496 657.482 153.024 660.584 Q149.552 663.663 143.232 663.663 Q141.056 663.663 138.788 663.293 Q136.542 662.922 134.135 662.181 L134.135 657.482 Q136.218 658.617 138.441 659.172 Q140.663 659.728 143.14 659.728 Q147.144 659.728 149.482 657.621 Q151.82 655.515 151.82 651.904 Q151.82 648.293 149.482 646.186 Q147.144 644.08 143.14 644.08 Q141.265 644.08 139.39 644.496 Q137.538 644.913 135.593 645.793 L135.593 628.432 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip830)" d="M89.3667 380.503 L107.723 380.503 L107.723 384.438 L93.6491 384.438 L93.6491 392.91 Q94.6676 392.563 95.6861 392.401 Q96.7047 392.216 97.7232 392.216 Q103.51 392.216 106.89 395.387 Q110.269 398.558 110.269 403.975 Q110.269 409.553 106.797 412.655 Q103.325 415.734 97.0056 415.734 Q94.8297 415.734 92.5612 415.364 Q90.3158 414.993 87.9084 414.253 L87.9084 409.553 Q89.9917 410.688 92.2139 411.243 Q94.4361 411.799 96.913 411.799 Q100.918 411.799 103.256 409.692 Q105.593 407.586 105.593 403.975 Q105.593 400.364 103.256 398.257 Q100.918 396.151 96.913 396.151 Q95.038 396.151 93.163 396.567 Q91.3112 396.984 89.3667 397.864 L89.3667 380.503 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip830)" d="M119.482 409.183 L124.367 409.183 L124.367 415.063 L119.482 415.063 L119.482 409.183 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip830)" d="M144.552 383.581 Q140.941 383.581 139.112 387.146 Q137.306 390.688 137.306 397.817 Q137.306 404.924 139.112 408.489 Q140.941 412.03 144.552 412.03 Q148.186 412.03 149.991 408.489 Q151.82 404.924 151.82 397.817 Q151.82 390.688 149.991 387.146 Q148.186 383.581 144.552 383.581 M144.552 379.878 Q150.362 379.878 153.417 384.484 Q156.496 389.067 156.496 397.817 Q156.496 406.544 153.417 411.151 Q150.362 415.734 144.552 415.734 Q138.741 415.734 135.663 411.151 Q132.607 406.544 132.607 397.817 Q132.607 389.067 135.663 384.484 Q138.741 379.878 144.552 379.878 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip830)" d="M89.1352 132.574 L111.357 132.574 L111.357 134.564 L98.8111 167.134 L93.9269 167.134 L105.732 136.509 L89.1352 136.509 L89.1352 132.574 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip830)" d="M120.478 161.254 L125.362 161.254 L125.362 167.134 L120.478 167.134 L120.478 161.254 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><path clip-path="url(#clip830)" d="M135.593 132.574 L153.95 132.574 L153.95 136.509 L139.876 136.509 L139.876 144.981 Q140.894 144.634 141.913 144.472 Q142.931 144.287 143.95 144.287 Q149.737 144.287 153.116 147.458 Q156.496 150.629 156.496 156.046 Q156.496 161.624 153.024 164.726 Q149.552 167.805 143.232 167.805 Q141.056 167.805 138.788 167.435 Q136.542 167.064 134.135 166.324 L134.135 161.624 Q136.218 162.759 138.441 163.314 Q140.663 163.87 143.14 163.87 Q147.144 163.87 149.482 161.763 Q151.82 159.657 151.82 156.046 Q151.82 152.435 149.482 150.328 Q147.144 148.222 143.14 148.222 Q141.265 148.222 139.39 148.638 Q137.538 149.055 135.593 149.935 L135.593 132.574 Z" fill="#000000" fill-rule="nonzero" fill-opacity="1"></path><polyline clip-path="url(#clip832)" style="stroke:#009af9; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:0.5; fill:none" points="265.984,1048.29 268.292,1278.64 270.6,1421.34 272.908,1320.32 275.216,1366.58 277.524,1436.61 279.832,1333.63 282.139,1318.78 284.447,1229.92 286.755,1311.96 289.063,1376.7 291.371,1372.8 293.679,1578.53 295.987,1482.01 298.295,1399.01 300.603,1417.83 302.911,1340.51 305.219,1404.4 307.527,1413.29 309.834,1484.54 312.142,1388.73 314.45,1527.56 316.758,1591.41 319.066,1384.94 321.374,1278.08 323.682,1258.53 325.99,1362.02 328.298,1409 330.606,1113 332.914,1400.46 335.221,1259.41 337.529,1336.74 339.837,1393.13 342.145,1593.09 344.453,1422.48 346.761,1404.74 349.069,1471.66 351.377,1448.08 353.685,1349.2 355.993,1322.68 358.301,1393.48 360.608,1375.56 362.916,1533.03 365.224,1295.54 367.532,1384.79 369.84,1513.75 372.148,1384.61 374.456,1595.58 376.764,1269.73 379.072,1503.68 381.38,1320.91 383.688,1248.67 385.996,1467.11 388.303,1411.23 390.611,1315.84 392.919,1334.68 395.227,1456.36 397.535,1386.89 399.843,1407.2 402.151,1227.24 404.459,1355.02 406.767,1469.09 409.075,1389.93 411.383,1484.93 413.69,1519.85 415.998,1464.46 418.306,1471.21 420.614,1375.97 422.922,1317.02 425.23,1393.21 427.538,1614.03 429.846,1343.63 432.154,1444.84 434.462,1487.87 436.77,1501.92 439.077,1169.97 441.385,1325.38 443.693,1532.68 446.001,1286.88 448.309,1257.58 450.617,1431.51 452.925,1266.58 455.233,1521.85 457.541,1116.1 459.849,1377.3 462.157,1449.77 464.465,1364.65 466.772,1364.6 469.08,1417.26 471.388,1367.69 473.696,1227.41 476.004,1377.71 478.312,1443.01 480.62,1356.78 482.928,1388.47 485.236,1194.27 487.544,1454.26 489.852,1332.74 492.159,1467.42 494.467,1420.27 496.775,1412.63 499.083,1456.04 501.391,1391.71 503.699,1751.15 506.007,1407.36 508.315,1321.68 510.623,1307.39 512.931,1471.59 515.239,1514.03 517.546,1388.95 519.854,1300.28 522.162,1421.46 524.47,1518.75 526.778,1325.64 529.086,1445.39 531.394,1364.65 533.702,1245.84 536.01,1393.95 538.318,1469.75 540.626,1300.22 542.933,1398.05 545.241,1231.39 547.549,1441.93 549.857,1276.15 552.165,1452.35 554.473,1418.18 556.781,1350.07 559.089,1402.18 561.397,1330.45 563.705,1299.62 566.013,1327.6 568.321,1384.24 570.628,1473.85 572.936,1410.36 575.244,1337.24 577.552,1428.37 579.86,1358.06 582.168,1525.95 584.476,1316.25 586.784,1338.88 589.092,1400.45 591.4,1397.72 593.708,1254.88 596.015,1257.82 598.323,1331.37 600.631,1306.82 602.939,1421.65 605.247,1355.02 607.555,1436.36 609.863,1392.88 612.171,1515.01 614.479,1348.81 616.787,1285.11 619.095,1259.88 621.402,1361.24 623.71,1467.74 626.018,1552.25 628.326,1553.03 630.634,1316.35 632.942,1430.9 635.25,1405.03 637.558,1350.22 639.866,1368.9 642.174,1655.49 644.482,1415.48 646.79,1381.97 649.097,1468.42 651.405,1370.05 653.713,1586.43 656.021,1299.13 658.329,1421.48 660.637,1432.9 662.945,1621.27 665.253,1565.62 667.561,1328.18 669.869,1235.9 672.177,1522.76 674.484,1466.3 676.792,1372.13 679.1,1469.14 681.408,1384.38 683.716,1470.12 686.024,1398.24 688.332,1226.4 690.64,1497.95 692.948,1444.81 695.256,1363.79 697.564,1491.66 699.871,1409.35 702.179,1328.79 704.487,1438.67 706.795,1253.11 709.103,1386.66 711.411,1205.68 713.719,1292.44 716.027,1437.17 718.335,1333.23 720.643,1519.52 722.951,1410.67 725.259,1275.04 727.566,1409.07 729.874,1499.69 732.182,1351.98 734.49,1583.93 736.798,1311.87 739.106,1372.81 741.414,1353.81 743.722,1174.87 746.03,1223.03 748.338,1326.1 750.646,1323.56 752.953,1401.74 755.261,1455.33 757.569,1411.77 759.877,1409.96 762.185,1366.79 764.493,1395.88 766.801,1426.02 769.109,1532.94 771.417,1385.38 773.725,1441.36 776.033,1392.56 778.34,1486.12 780.648,1446.73 782.956,1500.82 785.264,1576.55 787.572,1367.91 789.88,1377.82 792.188,1315.04 794.496,1345.75 796.804,1250.63 799.112,1322.46 801.42,1347.29 803.728,1172.84 806.035,1316.96 808.343,1350.04 810.651,1484.38 812.959,1207.47 815.267,1420.72 817.575,1418.37 819.883,1200.75 822.191,1340.74 824.499,1317.62 826.807,1476.37 829.115,1159.06 831.422,1228.99 833.73,1417.17 836.038,1339.21 838.346,1309.69 840.654,1401.4 842.962,1608.35 845.27,1473.92 847.578,1246.84 849.886,1413.26 852.194,1298.57 854.502,1456.71 856.809,1380.69 859.117,1477.9 861.425,1332.16 863.733,1395.54 866.041,1290.98 868.349,1300.83 870.657,1393.73 872.965,1321.51 875.273,1433.81 877.581,1499.85 879.889,1322.84 882.197,1341.17 884.504,1576.65 886.812,1528.21 889.12,1487.89 891.428,1322.2 893.736,1454.53 896.044,1416.32 898.352,1283.22 900.66,1467.53 902.968,1286.41 905.276,1341.77 907.584,1274.06 909.891,1366.52 912.199,1184.23 914.507,1375.06 916.815,1570.96 919.123,1385.64 921.431,1395.46 923.739,1168.01 926.047,1169.15 928.355,1487.33 930.663,1430.31 932.971,1571.98 935.278,1261.44 937.586,1270.16 939.894,1431.26 942.202,1355.63 944.51,1626.99 946.818,1463.84 949.126,1408.71 951.434,1478.95 953.742,1415.31 956.05,1595.58 958.358,1430.25 960.665,1423.65 962.973,1384.13 965.281,1605.5 967.589,1532.24 969.897,1305.68 972.205,1420.2 974.513,1370.42 976.821,1500.26 979.129,1381.18 981.437,1520.43 983.745,1331.33 986.053,1595.82 988.36,1539.13 990.668,1287.84 992.976,1518.16 995.284,1229.36 997.592,1271.12 999.9,1411.18 1002.21,1478.06 1004.52,1513.08 1006.82,1156.86 1009.13,1371.53 1011.44,1394.06 1013.75,1214.24 1016.06,1464.68 1018.36,1235.94 1020.67,1538.23 1022.98,1420.73 1025.29,1496.58 1027.59,1504.76 1029.9,1539.38 1032.21,1176.23 1034.52,1546.84 1036.83,1388.02 1039.13,1380.37 1041.44,1621.84 1043.75,1494.07 1046.06,1591.13 1048.37,1369.9 1050.67,1465.65 1052.98,1320.23 1055.29,1574.22 1057.6,1463.3 1059.91,1638.24 1062.21,1303.1 1064.52,1342.51 1066.83,1320.62 1069.14,1303.04 1071.45,1321.18 1073.75,1602.01 1076.06,1440.68 1078.37,1251.86 1080.68,1368.68 1082.98,1340.13 1085.29,1481.91 1087.6,1453.84 1089.91,1318.06 1092.22,1268.99 1094.52,1289.77 1096.83,1377.4 1099.14,1328.58 1101.45,1424.5 1103.76,1540.37 1106.06,1222.46 1108.37,1405.02 1110.68,1587.14 1112.99,1404.28 1115.3,1253.16 1117.6,1482.72 1119.91,1412.11 1122.22,1477.15 1124.53,1349.25 1126.84,1264.64 1129.14,1549.5 1131.45,1419.27 1133.76,1435.89 1136.07,1278.11 1138.37,1419.57 1140.68,1354.22 1142.99,1434.29 1145.3,1378.18 1147.61,1426.45 1149.91,1461.91 1152.22,1391.16 1154.53,1352.41 1156.84,1269.19 1159.15,1449.28 1161.45,1354.63 1163.76,1348.85 1166.07,1343.71 1168.38,1429.91 1170.69,1408.09 1172.99,1225.01 1175.3,1231.32 1177.61,1447.57 1179.92,1329.61 1182.23,1298.57 1184.53,1414.04 1186.84,1379.74 1189.15,1272.98 1191.46,1260.44 1193.76,1405.85 1196.07,1399.6 1198.38,1273.08 1200.69,1440.72 1203,1526.37 1205.3,1462.88 1207.61,1429.13 1209.92,1258.96 1212.23,1436.72 1214.54,1284.26 1216.84,1450.47 1219.15,1347.27 1221.46,1242.48 1223.77,1399.74 1226.08,1444.15 1228.38,1315.09 1230.69,1567.69 1233,1429.72 1235.31,1252.39 1237.61,1265.31 1239.92,1362.79 1242.23,1386.3 1244.54,1357.31 1246.85,1317.01 1249.15,1439.48 1251.46,1493.68 1253.77,1377.78 1256.08,1441.14 1258.39,1339.95 1260.69,1316.83 1263,1492.7 1265.31,1402.04 1267.62,1582.33 1269.93,1435.34 1272.23,1394.38 1274.54,1266.77 1276.85,1433.24 1279.16,1435.38 1281.47,1384.69 1283.77,1283.59 1286.08,1503.39 1288.39,1346.72 1290.7,1412.16 1293,1340.91 1295.31,1274.72 1297.62,1161.72 1299.93,1375.19 1302.24,1485.65 1304.54,1305.41 1306.85,1410.88 1309.16,1399.44 1311.47,1407.61 1313.78,1164.6 1316.08,1365.03 1318.39,1444.82 1320.7,1668.1 1323.01,1231.48 1325.32,1279.26 1327.62,1273.24 1329.93,1350.91 1332.24,1284.82 1334.55,1481.72 1336.86,1380.98 1339.16,1444.84 1341.47,1266 1343.78,1452.94 1346.09,1319.29 1348.39,1287.05 1350.7,1385.08 1353.01,1311.14 1355.32,1258.68 1357.63,1452.45 1359.93,1393.31 1362.24,1353.99 1364.55,1461.22 1366.86,1312.62 1369.17,1481.07 1371.47,1409.58 1373.78,1427.36 1376.09,1501.21 1378.4,1453.4 1380.71,1633.17 1383.01,1390.06 1385.32,1418.57 1387.63,1259.68 1389.94,1441.83 1392.24,1229.19 1394.55,1575.3 1396.86,1315.12 1399.17,1372.49 1401.48,1365.08 1403.78,1331.33 1406.09,1588.9 1408.4,1216.34 1410.71,1266.66 1413.02,1326.11 1415.32,1456.53 1417.63,1350.96 1419.94,1422.01 1422.25,1369.05 1424.56,1324.35 1426.86,1432.32 1429.17,1403.37 1431.48,1519.17 1433.79,1501.53 1436.1,1495.19 1438.4,1493.32 1440.71,1496.53 1443.02,1353.81 1445.33,1532.5 1447.63,1490.89 1449.94,1421.87 1452.25,1333.13 1454.56,1275.64 1456.87,1406.57 1459.17,1690.08 1461.48,1245.27 1463.79,1583.49 1466.1,1290.41 1468.41,1304.11 1470.71,1368.21 1473.02,1177.07 1475.33,1201.05 1477.64,1291.98 1479.95,1353.2 1482.25,1452.61 1484.56,1404.81 1486.87,1377.18 1489.18,1207.74 1491.49,1294.5 1493.79,1503.25 1496.1,1330.48 1498.41,1216.55 1500.72,1281.6 1503.02,1388.32 1505.33,1378.79 1507.64,1529.69 1509.95,1304.44 1512.26,1317.49 1514.56,1416.98 1516.87,1501.21 1519.18,1279.93 1521.49,1317.15 1523.8,1320.63 1526.1,1448.29 1528.41,1438.94 1530.72,1464.12 1533.03,1432.79 1535.34,1559.75 1537.64,1407.96 1539.95,1314.96 1542.26,1245.26 1544.57,1424.58 1546.88,1450.28 1549.18,1532.62 1551.49,1340.69 1553.8,1483.35 1556.11,1438.24 1558.41,1498.42 1560.72,1308.43 1563.03,1367.65 1565.34,1498.18 1567.65,1397.83 1569.95,1475.01 1572.26,1375.93 1574.57,1522.25 1576.88,1513.56 1579.19,1342.08 1581.49,1407.16 1583.8,1287.13 1586.11,1386.36 1588.42,1394.01 1590.73,1515.51 1593.03,1436.93 1595.34,1417.26 1597.65,1351.17 1599.96,1296.66 1602.26,1623.19 1604.57,1382.12 1606.88,1594.4 1609.19,1483.61 1611.5,1389.69 1613.8,1489.46 1616.11,1518 1618.42,1430.08 1620.73,1293.19 1623.04,1443.05 1625.34,1454.41 1627.65,1372.64 1629.96,1295.51 1632.27,1467.55 1634.58,1368.43 1636.88,1336.08 1639.19,1292.07 1641.5,1467.26 1643.81,1370.24 1646.12,1362.8 1648.42,1382.15 1650.73,1426.2 1653.04,1299.66 1655.35,1397.88 1657.65,1459.87 1659.96,1371.72 1662.27,1345.61 1664.58,1382.18 1666.89,1254.46 1669.19,1464.74 1671.5,1205.36 1673.81,1337.8 1676.12,1437.29 1678.43,1361.22 1680.73,1359.92 1683.04,1654.62 1685.35,1438.74 1687.66,1445.03 1689.97,1340.98 1692.27,1440.14 1694.58,1337.96 1696.89,1530.42 1699.2,1380.58 1701.51,1300.57 1703.81,1337.42 1706.12,1428.49 1708.43,1225.74 1710.74,1264.92 1713.04,1405.31 1715.35,1249.98 1717.66,1381.85 1719.97,1484.83 1722.28,1317.04 1724.58,1396.02 1726.89,1371.61 1729.2,1292.22 1731.51,1214.1 1733.82,1336.38 1736.12,1375.63 1738.43,1491.35 1740.74,1265.88 1743.05,1454.7 1745.36,1509.83 1747.66,1541.79 1749.97,1391.35 1752.28,1355.44 1754.59,1391.2 1756.9,1292.61 1759.2,1556.64 1761.51,1377.15 1763.82,1551.64 1766.13,1345.97 1768.43,1355.52 1770.74,1411.73 1773.05,1493.61 1775.36,1394.49 1777.67,1425.11 1779.97,1209.53 1782.28,1495.75 1784.59,1321.85 1786.9,1549.34 1789.21,1467.84 1791.51,1472.06 1793.82,1340.71 1796.13,1303.23 1798.44,1479.9 1800.75,1279.26 1803.05,1372.88 1805.36,1351.22 1807.67,1351.92 1809.98,1609.44 1812.28,1277.45 1814.59,1550.24 1816.9,1371.5 1819.21,1372.71 1821.52,1370.67 1823.82,1350.21 1826.13,1546.18 1828.44,1557.98 1830.75,1386.07 1833.06,1374.79 1835.36,1386.72 1837.67,1159.06 1839.98,1516.78 1842.29,1440.08 1844.6,1375.41 1846.9,1448.93 1849.21,1440.98 1851.52,1578.86 1853.83,1541.95 1856.14,1486.07 1858.44,1280.47 1860.75,1460.65 1863.06,1388.41 1865.37,1315.97 1867.67,1247.77 1869.98,1519.28 1872.29,1365.99 1874.6,1458.05 1876.91,1429.43 1879.21,1430.67 1881.52,1287.61 1883.83,1418.57 1886.14,1415.18 1888.45,1387.23 1890.75,1331.92 1893.06,1286.77 1895.37,1356.95 1897.68,1460.2 1899.99,1340.17 1902.29,1548.12 1904.6,1511.23 1906.91,1311.34 1909.22,1388.08 1911.53,1489.08 1913.83,1367.96 1916.14,1281.37 1918.45,1363.45 1920.76,1463.35 1923.06,1248.34 1925.37,1245.45 1927.68,1099.66 1929.99,1409.8 1932.3,1403.95 1934.6,1308.04 1936.91,1399.52 1939.22,1380.04 1941.53,1660.77 1943.84,1493.91 1946.14,1518.62 1948.45,1429.61 1950.76,1499.34 1953.07,1568.18 1955.38,1201.19 1957.68,1493.28 1959.99,1406.89 1962.3,1155.15 1964.61,1457.33 1966.91,1348.42 1969.22,1519.26 1971.53,1297.54 1973.84,1411.05 1976.15,1428.61 1978.45,1410.75 1980.76,1383.32 1983.07,1375.15 1985.38,1289.07 1987.69,1231.97 1989.99,1400.32 1992.3,1219.95 1994.61,1395.92 1996.92,1287.71 1999.23,1429.71 2001.53,1291 2003.84,1524.17 2006.15,1300.49 2008.46,1363.36 2010.77,1375.82 2013.07,1425.31 2015.38,1465.96 2017.69,1394.05 2020,1257.14 2022.3,1488.16 2024.61,1246 2026.92,1329.62 2029.23,1481.61 2031.54,1415.07 2033.84,1378.66 2036.15,1401.03 2038.46,1289.82 2040.77,1222.32 2043.08,1298.06 2045.38,1390.68 2047.69,1175.65 2050,1306.19 2052.31,1331 2054.62,1536.3 2056.92,1410.72 2059.23,1383.52 2061.54,1443.99 2063.85,1320.45 2066.16,1316.62 2068.46,1370.8 2070.77,1400.71 2073.08,1336.02 2075.39,1398.31 2077.69,1377.71 2080,1278.82 2082.31,1413.23 2084.62,1291.78 2086.93,1313.02 2089.23,1446.21 2091.54,1512.35 2093.85,1399.8 2096.16,1364.25 2098.47,1279.7 2100.77,1438.01 2103.08,1320.65 2105.39,1273.6 2107.7,1425.36 2110.01,1364.18 2112.31,1508.29 2114.62,1336.26 2116.93,1434.33 2119.24,1317.26 2121.55,1319.76 2123.85,1500.89 2126.16,1419.98 2128.47,1504.15 2130.78,1315.4 2133.08,1260.84 2135.39,1413.98 2137.7,1294.88 2140.01,1346.73 2142.32,1366.61 2144.62,1406.27 2146.93,1340.69 2149.24,1611.27 2151.55,1408.67 2153.86,1441.44 2156.16,1274.15 2158.47,1341.51 2160.78,1460.05 2163.09,1356.58 2165.4,1409.23 2167.7,1294.9 2170.01,1409.06 2172.32,1407.62 2174.63,1369.95 2176.93,1248.98 2179.24,1566.48 2181.55,1315.89 2183.86,1403.43 2186.17,1548.35 2188.47,1436.2 2190.78,1505.38 2193.09,1334.05 2195.4,1190.56 2197.71,1551.01 2200.01,1343.74 2202.32,1382.24 2204.63,1401.81 2206.94,1376.31 2209.25,1275.35 2211.55,1373.63 2213.86,1359.88 2216.17,1427.53 2218.48,1415.37 2220.79,1299.32 2223.09,1356.6 2225.4,1573.88 2227.71,1438.57 2230.02,1405.76 2232.32,1277.79 2234.63,1407.52 2236.94,1203.16 2239.25,1454.4 2241.56,1324.41 2243.86,1722.14 2246.17,1485.16 2248.48,1330.34 2250.79,1337.65 2253.1,1444.74 2255.4,1428.21 2257.71,1359.96 2260.02,1444.72 2262.33,1440.38 2264.64,1195.53 2266.94,1640.84 2269.25,1453.01 2271.56,1248.59 2273.87,1414.93 2276.18,1375.64 2278.48,1187.37 2280.79,1457.78 2283.1,1547.12 2285.41,1519.99 2287.71,1332.6 2290.02,1510.74 2292.33,1381.87 2294.64,1472.28 2296.95,1411.21 2299.25,1277.77 2301.56,1400.59 2303.87,1528.75 2306.18,1352.02 2308.49,1317.75 2310.79,1310.36 2313.1,1186.42 2315.41,1392.95 2317.72,1522.53 2320.03,1407.43 2322.33,1318.15 2324.64,1381.65 2326.95,1312 2329.26,1242.96 2331.56,1297.74 2333.87,1302.18 2336.18,1379.71 2338.49,1414.24 2340.8,1424.11 2343.1,1372.07 2345.41,1390.58 2347.72,1355.73 2350.03,1463.27 2352.34,1412.35 2354.64,1393 2356.95,1293.7 2359.26,1450.28 2361.57,1261.58 2363.88,1533.6 2366.18,1346.73 2368.49,1479.08 2370.8,1251.1 2373.11,1344.53 2375.42,1277.67 2377.72,1274.13 2380.03,1402.82 2382.34,1431.49 2384.65,1463.18 2386.95,1588.76 2389.26,1274.01 2391.57,1352.88 2393.88,1369.82 2396.19,1403.83 2398.49,1401.36 2400.8,1182.98 2403.11,1227.46 2405.42,1417.87 2407.73,1358.49 2410.03,1239.93 2412.34,1407.86 2414.65,1326.51 2416.96,1469.96 2419.27,1471.79 2421.57,1328.18 2423.88,1285.72 2426.19,1403.49 2428.5,1369.01 2430.81,1488.43 2433.11,1488.72 2435.42,1424.91 2437.73,1370.46 2440.04,1348.81 2442.34,1456.29 2444.65,1313 2446.96,1421.23 2449.27,1430.69 2451.58,1422.93 2453.88,1267.45 2456.19,1356.57 2458.5,1407.92 2460.81,1353.81 2463.12,1299.19 2465.42,1572.02 2467.73,1442.06 2470.04,1493.55 2472.35,1498.24 2474.66,1369.39 2476.96,1343.66 2479.27,1517.26 2481.58,1413.83 2483.89,1202.06 2486.2,1321.71 2488.5,1350.07 2490.81,1216.25 2493.12,1372.23 2495.43,1438.19 2497.73,1278.38 2500.04,1467.07 2502.35,1543.53 2504.66,1259.95 2506.97,1352.78 2509.27,1464.04 2511.58,1418.18 2513.89,1400.02 2516.2,1391.94 2518.51,1321.7 2520.81,1395.6 2523.12,1413.53 2525.43,1533.15 2527.74,1612.33 2530.05,1353.41 2532.35,1370.47 2534.66,1492.69 2536.97,1613.22 2539.28,1502.71 2541.58,1388.85 2543.89,1463.47 2546.2,1462.43 2548.51,1438.33 2550.82,1220.14 2553.12,1245.83 2555.43,1243.43 2557.74,1400.83 2560.05,1461.35 2562.36,1412.81 2564.66,1391.52 2566.97,1368.89 2569.28,1432.99 2571.59,1310.48 "></polyline>
<polyline clip-path="url(#clip832)" style="stroke:#e26f46; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:0.5; fill:none" points="265.984,784.65 268.292,793.05 270.6,880.949 272.908,812.077 275.216,906.852 277.524,756.225 279.832,974.606 282.139,846.844 284.447,865.831 286.755,881.09 289.063,1068.46 291.371,938.392 293.679,827.225 295.987,970.933 298.295,862.06 300.603,915.311 302.911,756.865 305.219,862.441 307.527,903.648 309.834,893.651 312.142,755.537 314.45,1102.69 316.758,735.328 319.066,930.779 321.374,879.613 323.682,1022.23 325.99,787.522 328.298,790.372 330.606,802.788 332.914,965.046 335.221,1006.47 337.529,1137.11 339.837,945.22 342.145,1011.14 344.453,828.083 346.761,748.286 349.069,749.047 351.377,944.492 353.685,992.668 355.993,1053.68 358.301,957.918 360.608,1075.66 362.916,888.181 365.224,912.412 367.532,951.1 369.84,900.355 372.148,813.28 374.456,882.663 376.764,993.088 379.072,829.639 381.38,843.316 383.688,1006.08 385.996,821.844 388.303,792.559 390.611,592.282 392.919,846.929 395.227,862.938 397.535,993.672 399.843,1007.78 402.151,776.245 404.459,946.931 406.767,968.616 409.075,1102.06 411.383,886.516 413.69,1043.99 415.998,1026.97 418.306,869.539 420.614,820.024 422.922,871.55 425.23,910.176 427.538,940.407 429.846,712.883 432.154,893.349 434.462,1009.66 436.77,781.857 439.077,855.436 441.385,883.2 443.693,818.232 446.001,766.604 448.309,921.758 450.617,965.032 452.925,816.593 455.233,899.259 457.541,973.329 459.849,911.435 462.157,803.867 464.465,797.696 466.772,871.347 469.08,810.566 471.388,852.449 473.696,805.673 476.004,1016.44 478.312,903.349 480.62,805.293 482.928,798.719 485.236,526.914 487.544,834.956 489.852,785.402 492.159,831.343 494.467,865.476 496.775,915.28 499.083,893.219 501.391,741.136 503.699,948.745 506.007,821.777 508.315,886.079 510.623,765.016 512.931,827.277 515.239,873.258 517.546,656.688 519.854,983.911 522.162,785.589 524.47,892.072 526.778,956.981 529.086,857.223 531.394,805.516 533.702,827.296 536.01,653.215 538.318,712.384 540.626,939.872 542.933,762.126 545.241,887.331 547.549,944.085 549.857,873.021 552.165,958.219 554.473,844.606 556.781,840.787 559.089,812.784 561.397,789.323 563.705,1079.44 566.013,803.83 568.321,907.322 570.628,1028.65 572.936,707.751 575.244,818.034 577.552,860.096 579.86,959.552 582.168,893.213 584.476,979.861 586.784,797.179 589.092,855.137 591.4,973.129 593.708,1020.1 596.015,898.378 598.323,807.29 600.631,1033.95 602.939,979.351 605.247,968.639 607.555,1041 609.863,911.867 612.171,771.163 614.479,1033.69 616.787,804.647 619.095,993.28 621.402,939.054 623.71,821.242 626.018,937.671 628.326,789.335 630.634,866.34 632.942,784.169 635.25,963.305 637.558,994.83 639.866,979.208 642.174,873.258 644.482,782.562 646.79,1003.86 649.097,828.302 651.405,1051.43 653.713,649.579 656.021,750.075 658.329,1114.51 660.637,788.692 662.945,897.38 665.253,626.453 667.561,902.258 669.869,772.407 672.177,897.414 674.484,879.651 676.792,800.469 679.1,964.741 681.408,916.478 683.716,832.057 686.024,1033.56 688.332,856.046 690.64,848.169 692.948,908.228 695.256,800.971 697.564,872.094 699.871,896.487 702.179,969.641 704.487,1015.85 706.795,936.07 709.103,1098.18 711.411,835.692 713.719,943.918 716.027,846.436 718.335,811.374 720.643,1015.68 722.951,804.018 725.259,928.469 727.566,895.38 729.874,780.938 732.182,1082.51 734.49,774.669 736.798,906.871 739.106,916.539 741.414,781.855 743.722,875.945 746.03,836.728 748.338,912.466 750.646,897.136 752.953,826.976 755.261,879.659 757.569,860.266 759.877,910.104 762.185,881.07 764.493,980.442 766.801,955.245 769.109,906.409 771.417,857.484 773.725,1059.17 776.033,873.41 778.34,967.208 780.648,873.287 782.956,837.784 785.264,812.946 787.572,695.448 789.88,978.087 792.188,886.233 794.496,884.59 796.804,862.86 799.112,832.78 801.42,996.178 803.728,870.679 806.035,985.3 808.343,657.48 810.651,917.123 812.959,677.944 815.267,874.203 817.575,873.627 819.883,826.459 822.191,861.416 824.499,829.395 826.807,915.166 829.115,883.424 831.422,841.844 833.73,876.326 836.038,905.478 838.346,782.02 840.654,944.35 842.962,1004.19 845.27,1021.16 847.578,943.985 849.886,925.124 852.194,926.595 854.502,969.99 856.809,1040.53 859.117,861.879 861.425,786.635 863.733,818.734 866.041,838.044 868.349,906.964 870.657,888.591 872.965,872.51 875.273,1099.92 877.581,1034.5 879.889,869.436 882.197,903.046 884.504,1012.75 886.812,987.44 889.12,735.864 891.428,953.432 893.736,812.085 896.044,810.063 898.352,896.917 900.66,811.76 902.968,966.3 905.276,832.374 907.584,1021.55 909.891,817.016 912.199,966.031 914.507,831.319 916.815,849.741 919.123,808.379 921.431,739.803 923.739,934.402 926.047,882.263 928.355,1005.28 930.663,876.614 932.971,767.258 935.278,735.593 937.586,838.348 939.894,899.493 942.202,962.701 944.51,932.008 946.818,876.524 949.126,992.769 951.434,763.901 953.742,839.636 956.05,880.659 958.358,965.719 960.665,891.23 962.973,827.94 965.281,935.67 967.589,864.822 969.897,949.424 972.205,1066.22 974.513,779.216 976.821,801.75 979.129,928.714 981.437,806.03 983.745,807.252 986.053,975.638 988.36,827.387 990.668,738.087 992.976,749.882 995.284,1138.01 997.592,1102.47 999.9,625.203 1002.21,951.793 1004.52,898.228 1006.82,869.287 1009.13,900.365 1011.44,803.007 1013.75,943.58 1016.06,991.061 1018.36,1050.08 1020.67,1125.91 1022.98,882.001 1025.29,899.489 1027.59,969.59 1029.9,950.448 1032.21,909.758 1034.52,827.617 1036.83,905.917 1039.13,1030.92 1041.44,897.253 1043.75,896.146 1046.06,870.734 1048.37,595.666 1050.67,706.234 1052.98,884.729 1055.29,713.448 1057.6,934.863 1059.91,875.097 1062.21,831.555 1064.52,846.588 1066.83,812.551 1069.14,999.018 1071.45,829.528 1073.75,955.031 1076.06,678.298 1078.37,741.173 1080.68,798.19 1082.98,992.765 1085.29,904.462 1087.6,691.319 1089.91,1057.72 1092.22,761.881 1094.52,1013.23 1096.83,687.455 1099.14,942.114 1101.45,1000.36 1103.76,822.663 1106.06,917.527 1108.37,856.011 1110.68,897.344 1112.99,889.735 1115.3,975.232 1117.6,845.063 1119.91,894.992 1122.22,936.212 1124.53,840.163 1126.84,979.063 1129.14,680.723 1131.45,1045.68 1133.76,919.243 1136.07,918.258 1138.37,947.785 1140.68,843.778 1142.99,816.386 1145.3,732.354 1147.61,807.017 1149.91,871.943 1152.22,877.715 1154.53,1077.4 1156.84,1018.97 1159.15,939.589 1161.45,797.531 1163.76,970.535 1166.07,720.849 1168.38,818.2 1170.69,928.29 1172.99,828.922 1175.3,833.666 1177.61,708.292 1179.92,1027.66 1182.23,745.253 1184.53,905.131 1186.84,819.283 1189.15,847.687 1191.46,818.829 1193.76,715.612 1196.07,812.987 1198.38,998.61 1200.69,1064.66 1203,939.695 1205.3,827.362 1207.61,995.567 1209.92,902.549 1212.23,819.93 1214.54,940.202 1216.84,761.666 1219.15,894.991 1221.46,989.917 1223.77,922.614 1226.08,845.503 1228.38,1132.94 1230.69,871.968 1233,859.896 1235.31,842.446 1237.61,858.489 1239.92,886.144 1242.23,852.443 1244.54,971.426 1246.85,689.071 1249.15,816.157 1251.46,809.256 1253.77,993.565 1256.08,842.622 1258.39,782.149 1260.69,811.423 1263,898.298 1265.31,873.794 1267.62,1019.11 1269.93,743 1272.23,875.603 1274.54,852.755 1276.85,1036.78 1279.16,879.298 1281.47,868.094 1283.77,967.619 1286.08,1046.22 1288.39,845.319 1290.7,1038.06 1293,966.419 1295.31,843.678 1297.62,900.104 1299.93,919.605 1302.24,606.787 1304.54,952.126 1306.85,788.862 1309.16,782.726 1311.47,815.154 1313.78,840.742 1316.08,1044.25 1318.39,809.632 1320.7,818.919 1323.01,829.285 1325.32,794.931 1327.62,968.091 1329.93,908.381 1332.24,951.244 1334.55,954.133 1336.86,941.4 1339.16,832.646 1341.47,840.812 1343.78,1100.11 1346.09,920.591 1348.39,979.808 1350.7,968.369 1353.01,822.501 1355.32,868.744 1357.63,857.322 1359.93,927.348 1362.24,1034.9 1364.55,856.796 1366.86,755.963 1369.17,896.391 1371.47,753.806 1373.78,1022.73 1376.09,817.551 1378.4,890.779 1380.71,962.391 1383.01,911.299 1385.32,978.561 1387.63,885.215 1389.94,1107.06 1392.24,970.306 1394.55,810.636 1396.86,885.752 1399.17,887.164 1401.48,738.925 1403.78,702.735 1406.09,868.185 1408.4,978.767 1410.71,992.94 1413.02,854.061 1415.32,1050.3 1417.63,914.1 1419.94,708.021 1422.25,888.634 1424.56,746.677 1426.86,912.701 1429.17,1008.54 1431.48,800.788 1433.79,987.024 1436.1,1006.8 1438.4,868.492 1440.71,836.662 1443.02,990.876 1445.33,884.069 1447.63,984.856 1449.94,817.108 1452.25,1028.24 1454.56,808.459 1456.87,993.289 1459.17,729.074 1461.48,894.782 1463.79,793.606 1466.1,886.652 1468.41,813.734 1470.71,954.498 1473.02,757.273 1475.33,901.881 1477.64,736.022 1479.95,785.473 1482.25,735.932 1484.56,900.395 1486.87,852.032 1489.18,1056.84 1491.49,892.405 1493.79,847.905 1496.1,916.61 1498.41,765.662 1500.72,1026.71 1503.02,1013.28 1505.33,1127.6 1507.64,911.375 1509.95,1101.12 1512.26,933.031 1514.56,1036.98 1516.87,1017.69 1519.18,793.395 1521.49,927.024 1523.8,834.185 1526.1,849.293 1528.41,1005.69 1530.72,763.354 1533.03,928.376 1535.34,1015.59 1537.64,1017.24 1539.95,1024.05 1542.26,881.391 1544.57,847.397 1546.88,976.305 1549.18,968.655 1551.49,947.218 1553.8,946.984 1556.11,892.243 1558.41,741.08 1560.72,958.954 1563.03,928.765 1565.34,949.174 1567.65,959.724 1569.95,958.092 1572.26,935.851 1574.57,870.309 1576.88,840.034 1579.19,825.285 1581.49,912.192 1583.8,978.605 1586.11,845.882 1588.42,880.206 1590.73,748.283 1593.03,944.315 1595.34,959.261 1597.65,948.762 1599.96,872.86 1602.26,1061.13 1604.57,902.976 1606.88,971.842 1609.19,830.007 1611.5,959.711 1613.8,802.898 1616.11,894.788 1618.42,871.533 1620.73,839.788 1623.04,932.634 1625.34,900.109 1627.65,761.716 1629.96,860.716 1632.27,659.16 1634.58,1065.83 1636.88,892.903 1639.19,928.927 1641.5,881.12 1643.81,911.676 1646.12,1040.34 1648.42,997.527 1650.73,886.682 1653.04,898.14 1655.35,1044.83 1657.65,1092.48 1659.96,638.694 1662.27,913.095 1664.58,802.138 1666.89,839.831 1669.19,727.504 1671.5,900.784 1673.81,849.506 1676.12,880.906 1678.43,829.432 1680.73,982.184 1683.04,1041.38 1685.35,818.178 1687.66,1001.58 1689.97,904.063 1692.27,868.879 1694.58,755.159 1696.89,824.922 1699.2,798.937 1701.51,833.484 1703.81,1068.39 1706.12,844.481 1708.43,847.889 1710.74,1044.13 1713.04,821.213 1715.35,795.7 1717.66,908.762 1719.97,983.47 1722.28,943.089 1724.58,957.517 1726.89,815.968 1729.2,872.371 1731.51,916.978 1733.82,948.188 1736.12,781.362 1738.43,791.716 1740.74,857.509 1743.05,876.12 1745.36,893.649 1747.66,820.63 1749.97,915.425 1752.28,933.634 1754.59,1081.76 1756.9,896.522 1759.2,943.55 1761.51,583.962 1763.82,901.689 1766.13,940.103 1768.43,904.734 1770.74,1022.6 1773.05,1086.7 1775.36,935.876 1777.67,795.192 1779.97,843.116 1782.28,851.471 1784.59,674.291 1786.9,924.612 1789.21,877.685 1791.51,968.048 1793.82,744.589 1796.13,1006.34 1798.44,1120.45 1800.75,942.33 1803.05,737.63 1805.36,845.894 1807.67,863.393 1809.98,783.386 1812.28,972.949 1814.59,856.447 1816.9,999.7 1819.21,885.05 1821.52,901.682 1823.82,801.421 1826.13,761.558 1828.44,852.664 1830.75,1029.32 1833.06,1038.38 1835.36,711.811 1837.67,800.871 1839.98,812.325 1842.29,941.278 1844.6,934.683 1846.9,792.134 1849.21,877.773 1851.52,925.056 1853.83,750.3 1856.14,1156.51 1858.44,808.225 1860.75,637.032 1863.06,1054.81 1865.37,952.075 1867.67,919.552 1869.98,807.6 1872.29,852.422 1874.6,941.827 1876.91,905.342 1879.21,1014.04 1881.52,999.343 1883.83,868.631 1886.14,901.725 1888.45,1098.68 1890.75,906.745 1893.06,779.667 1895.37,915.238 1897.68,1011.4 1899.99,872.57 1902.29,895.963 1904.6,983.36 1906.91,801.841 1909.22,984.387 1911.53,949.923 1913.83,918.242 1916.14,905.899 1918.45,795.652 1920.76,905.239 1923.06,961.75 1925.37,739.269 1927.68,1004.7 1929.99,959.795 1932.3,1024.5 1934.6,910.565 1936.91,903.224 1939.22,890.868 1941.53,1172.83 1943.84,708.668 1946.14,959.314 1948.45,969.379 1950.76,966.074 1953.07,735.673 1955.38,924.3 1957.68,922.302 1959.99,1053.49 1962.3,889.576 1964.61,926.716 1966.91,889.788 1969.22,827.979 1971.53,1044.33 1973.84,794.711 1976.15,1001.46 1978.45,850.4 1980.76,870.205 1983.07,740.534 1985.38,677.334 1987.69,941.99 1989.99,892.891 1992.3,877.023 1994.61,859.721 1996.92,874.78 1999.23,713.735 2001.53,827.433 2003.84,916.31 2006.15,1076.8 2008.46,842.891 2010.77,801.501 2013.07,788.727 2015.38,829.337 2017.69,985.498 2020,830.782 2022.3,985.047 2024.61,640.787 2026.92,622.468 2029.23,1085.69 2031.54,828.011 2033.84,967.291 2036.15,881.621 2038.46,938.116 2040.77,987.662 2043.08,1039.84 2045.38,1010.01 2047.69,834.843 2050,1103.79 2052.31,1136.67 2054.62,995.298 2056.92,994.995 2059.23,928.171 2061.54,802.536 2063.85,1124.87 2066.16,876.697 2068.46,869.658 2070.77,901.483 2073.08,894.165 2075.39,928.742 2077.69,900.163 2080,1005.06 2082.31,929.869 2084.62,950.565 2086.93,883.908 2089.23,888.829 2091.54,1077.81 2093.85,899.522 2096.16,821.067 2098.47,930.763 2100.77,853.087 2103.08,903.807 2105.39,889.684 2107.7,901.195 2110.01,951.212 2112.31,970.836 2114.62,947.218 2116.93,700.768 2119.24,926.414 2121.55,1062.07 2123.85,881.49 2126.16,742.05 2128.47,842.35 2130.78,952.792 2133.08,930.215 2135.39,877.266 2137.7,918.665 2140.01,699.362 2142.32,981.618 2144.62,834.95 2146.93,790.882 2149.24,820.807 2151.55,869.514 2153.86,950.458 2156.16,862.739 2158.47,875.14 2160.78,909.841 2163.09,889.356 2165.4,822.814 2167.7,962.363 2170.01,755.941 2172.32,1062.52 2174.63,1103.02 2176.93,971.302 2179.24,925.728 2181.55,931.16 2183.86,882.441 2186.17,850.602 2188.47,824.188 2190.78,840.064 2193.09,981.549 2195.4,899.82 2197.71,1025.4 2200.01,772.496 2202.32,714.691 2204.63,883.612 2206.94,713.109 2209.25,807.938 2211.55,742.109 2213.86,1044.88 2216.17,849.109 2218.48,898.649 2220.79,884.951 2223.09,908.65 2225.4,829.984 2227.71,892.61 2230.02,798.951 2232.32,817.354 2234.63,1088.04 2236.94,836.731 2239.25,953.432 2241.56,822.828 2243.86,1003.77 2246.17,940.457 2248.48,1168.51 2250.79,930.567 2253.1,809.123 2255.4,842.022 2257.71,1026.41 2260.02,972.775 2262.33,840.035 2264.64,767.059 2266.94,821.613 2269.25,843.955 2271.56,928.368 2273.87,775.008 2276.18,971.143 2278.48,973.662 2280.79,900.751 2283.1,708.052 2285.41,838.023 2287.71,968.111 2290.02,910.039 2292.33,799.864 2294.64,891.878 2296.95,1038.53 2299.25,908.899 2301.56,1021.79 2303.87,844.458 2306.18,774.373 2308.49,1062.83 2310.79,952.146 2313.1,1029.38 2315.41,825.554 2317.72,912.185 2320.03,955.273 2322.33,872.425 2324.64,889.923 2326.95,979.282 2329.26,840.527 2331.56,934.096 2333.87,795.151 2336.18,1113.79 2338.49,818.051 2340.8,716.318 2343.1,821.458 2345.41,890.434 2347.72,783.325 2350.03,1110.21 2352.34,1136.43 2354.64,901.456 2356.95,933.196 2359.26,893.496 2361.57,988.353 2363.88,879.713 2366.18,951.051 2368.49,773.674 2370.8,948.823 2373.11,828.348 2375.42,753.494 2377.72,889.965 2380.03,788.13 2382.34,1013.62 2384.65,797.802 2386.95,878.11 2389.26,889.185 2391.57,738.41 2393.88,933.038 2396.19,839.283 2398.49,722.229 2400.8,903.058 2403.11,1008.36 2405.42,1037.8 2407.73,817.547 2410.03,910.588 2412.34,752.478 2414.65,808.911 2416.96,689.928 2419.27,852.696 2421.57,850.148 2423.88,899.77 2426.19,891.602 2428.5,954.454 2430.81,854.458 2433.11,959.308 2435.42,876.289 2437.73,759.205 2440.04,772.841 2442.34,827.192 2444.65,1005.67 2446.96,933.02 2449.27,863.005 2451.58,1064.12 2453.88,977.45 2456.19,781.021 2458.5,862.82 2460.81,988.024 2463.12,822.823 2465.42,902.976 2467.73,885.211 2470.04,895.54 2472.35,905.337 2474.66,1047.21 2476.96,1047.07 2479.27,857.697 2481.58,1058.73 2483.89,998.416 2486.2,948.876 2488.5,749.761 2490.81,845.05 2493.12,1046.17 2495.43,778.377 2497.73,952.903 2500.04,874.636 2502.35,948.554 2504.66,1104.03 2506.97,1037.26 2509.27,772.283 2511.58,953.075 2513.89,720.093 2516.2,810.78 2518.51,800.163 2520.81,924.514 2523.12,967.777 2525.43,836.637 2527.74,850.332 2530.05,989.577 2532.35,919.876 2534.66,850.577 2536.97,1072.59 2539.28,889.449 2541.58,1016.37 2543.89,848.193 2546.2,872.043 2548.51,1059.48 2550.82,1006.26 2553.12,812.635 2555.43,1061.22 2557.74,923.61 2560.05,776.216 2562.36,926.701 2564.66,987.534 2566.97,988.99 2569.28,1024.36 2571.59,932.554 "></polyline>
<polyline clip-path="url(#clip832)" style="stroke:#3da44d; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:0.5; fill:none" points="265.984,618.652 268.292,408.643 270.6,317.789 272.908,335.089 275.216,449.304 277.524,275.639 279.832,477.523 282.139,317.301 284.447,334.704 286.755,419.649 289.063,355.713 291.371,353.244 293.679,422.21 295.987,501.749 298.295,304.946 300.603,302.083 302.911,386.557 305.219,364.497 307.527,298.97 309.834,460.692 312.142,477.084 314.45,344.517 316.758,298.741 319.066,321.193 321.374,428.796 323.682,258.963 325.99,443.682 328.298,188.427 330.606,235.692 332.914,327.416 335.221,505.128 337.529,270.427 339.837,373.33 342.145,516.874 344.453,310.675 346.761,482.465 349.069,402.441 351.377,551.664 353.685,482.184 355.993,269.713 358.301,267.773 360.608,351.407 362.916,242.45 365.224,520.884 367.532,378.279 369.84,386.1 372.148,475.725 374.456,368.553 376.764,302.829 379.072,627.282 381.38,363.482 383.688,448.054 385.996,427.738 388.303,532.616 390.611,393.937 392.919,638.788 395.227,470.914 397.535,263.05 399.843,439.108 402.151,393.644 404.459,535.879 406.767,391.403 409.075,349.255 411.383,426.261 413.69,233.738 415.998,515.032 418.306,528.223 420.614,314.767 422.922,301.207 425.23,336.903 427.538,153.472 429.846,500.871 432.154,442.334 434.462,548.166 436.77,474.834 439.077,412.022 441.385,302.833 443.693,493.276 446.001,472.975 448.309,217.85 450.617,359.023 452.925,548.099 455.233,542.698 457.541,404.411 459.849,544.403 462.157,403.438 464.465,376.273 466.772,612.737 469.08,427.659 471.388,396.679 473.696,438.997 476.004,270.501 478.312,498.474 480.62,334.305 482.928,369.143 485.236,334.646 487.544,516.997 489.852,410.366 492.159,456.141 494.467,392.797 496.775,214.778 499.083,174.532 501.391,397.387 503.699,511.865 506.007,572.713 508.315,313.011 510.623,443.217 512.931,295.358 515.239,539.215 517.546,421.759 519.854,345.436 522.162,409.531 524.47,460.009 526.778,350.871 529.086,368.91 531.394,235.837 533.702,422.156 536.01,504.084 538.318,519.907 540.626,192.882 542.933,146.129 545.241,418.142 547.549,326.785 549.857,328.45 552.165,382.985 554.473,263.238 556.781,356.964 559.089,427.635 561.397,364.596 563.705,541.42 566.013,344.884 568.321,274.362 570.628,457.027 572.936,195.857 575.244,535.248 577.552,300.738 579.86,331.681 582.168,438.304 584.476,656.935 586.784,247.991 589.092,260.714 591.4,458.159 593.708,363.26 596.015,283.95 598.323,515.578 600.631,510.236 602.939,212.819 605.247,435.718 607.555,403.411 609.863,271.139 612.171,384.658 614.479,375.556 616.787,329.077 619.095,393.369 621.402,402.851 623.71,435.395 626.018,410.856 628.326,194.848 630.634,496.555 632.942,462.601 635.25,340.063 637.558,367.801 639.866,248.96 642.174,408.59 644.482,415.318 646.79,354.517 649.097,275.517 651.405,427.997 653.713,379.01 656.021,369.804 658.329,426.321 660.637,455.01 662.945,433.404 665.253,515.95 667.561,520.208 669.869,338.941 672.177,575.451 674.484,465.793 676.792,512.633 679.1,572.887 681.408,476.429 683.716,193.137 686.024,454.875 688.332,594.166 690.64,390.693 692.948,424.355 695.256,286.638 697.564,370.654 699.871,430.865 702.179,464.997 704.487,398.604 706.795,463.554 709.103,484.7 711.411,459.055 713.719,395.793 716.027,335.302 718.335,522.567 720.643,452.671 722.951,464.8 725.259,369.777 727.566,506.292 729.874,487.838 732.182,381.083 734.49,562.223 736.798,340.09 739.106,369.969 741.414,454.28 743.722,340.938 746.03,337.374 748.338,386.131 750.646,467.193 752.953,407.424 755.261,338.708 757.569,319.515 759.877,507.696 762.185,599.554 764.493,288.455 766.801,360.764 769.109,489.413 771.417,593.348 773.725,502.366 776.033,425.508 778.34,612.984 780.648,329.68 782.956,235.821 785.264,420.752 787.572,428.915 789.88,448.336 792.188,289.958 794.496,331.878 796.804,367.253 799.112,353.105 801.42,556.211 803.728,373.334 806.035,383.859 808.343,350.561 810.651,497.867 812.959,418.462 815.267,380.919 817.575,432.644 819.883,397.583 822.191,428.212 824.499,434.658 826.807,317.754 829.115,307.2 831.422,395.577 833.73,265.471 836.038,297.191 838.346,480.632 840.654,273.711 842.962,433.932 845.27,325.656 847.578,506.712 849.886,456.098 852.194,354.969 854.502,444.077 856.809,426.311 859.117,569.333 861.425,356.981 863.733,231.518 866.041,456.004 868.349,406.142 870.657,178.859 872.965,510.857 875.273,195.294 877.581,333.27 879.889,381.658 882.197,233.771 884.504,258.97 886.812,357.588 889.12,338.63 891.428,451.101 893.736,324.204 896.044,305.264 898.352,363.936 900.66,544.731 902.968,462.325 905.276,598.676 907.584,473.238 909.891,429.916 912.199,324.884 914.507,503.684 916.815,381.919 919.123,327.35 921.431,308.556 923.739,405.142 926.047,377.462 928.355,492.139 930.663,572.941 932.971,326.264 935.278,566.685 937.586,513.187 939.894,352.425 942.202,468.809 944.51,425.348 946.818,642.792 949.126,454.25 951.434,188.606 953.742,382.332 956.05,446.888 958.358,398.024 960.665,335.446 962.973,432.701 965.281,366.583 967.589,471.692 969.897,347.193 972.205,566.435 974.513,552.685 976.821,601.757 979.129,463.051 981.437,496.615 983.745,351.714 986.053,204.859 988.36,335.421 990.668,229.591 992.976,277.069 995.284,435.461 997.592,445.96 999.9,335.04 1002.21,549.525 1004.52,425.093 1006.82,219.976 1009.13,211.491 1011.44,276.715 1013.75,338.369 1016.06,481.262 1018.36,278.694 1020.67,602.377 1022.98,285.552 1025.29,406.895 1027.59,572.022 1029.9,397.518 1032.21,475.473 1034.52,327.244 1036.83,299.578 1039.13,327.475 1041.44,385.32 1043.75,551.722 1046.06,480.286 1048.37,483.261 1050.67,399.686 1052.98,564.189 1055.29,572.877 1057.6,459.339 1059.91,450.477 1062.21,329.633 1064.52,523.766 1066.83,383.03 1069.14,369.862 1071.45,422.516 1073.75,501.905 1076.06,325.562 1078.37,585.821 1080.68,435.035 1082.98,654.441 1085.29,397.253 1087.6,503.001 1089.91,462.333 1092.22,522.367 1094.52,428.534 1096.83,279.686 1099.14,455.885 1101.45,273.21 1103.76,298.87 1106.06,303.878 1108.37,385.342 1110.68,368.405 1112.99,569.478 1115.3,599.086 1117.6,303.597 1119.91,393.377 1122.22,285.268 1124.53,439.193 1126.84,461.159 1129.14,533.946 1131.45,96.8724 1133.76,401.491 1136.07,330.981 1138.37,342.815 1140.68,292.622 1142.99,311.085 1145.3,451.663 1147.61,466.171 1149.91,469.03 1152.22,374.876 1154.53,509.919 1156.84,235.12 1159.15,375.676 1161.45,438.726 1163.76,298.859 1166.07,340.834 1168.38,578.71 1170.69,230.304 1172.99,554.24 1175.3,455.804 1177.61,433.253 1179.92,392.686 1182.23,484.394 1184.53,543.214 1186.84,483.994 1189.15,403.552 1191.46,327.71 1193.76,464.046 1196.07,204.936 1198.38,450.495 1200.69,305.466 1203,376.048 1205.3,303.43 1207.61,258.704 1209.92,478.773 1212.23,306.089 1214.54,363.094 1216.84,523.852 1219.15,341.839 1221.46,492.326 1223.77,290.001 1226.08,392.957 1228.38,534.299 1230.69,401.074 1233,507.427 1235.31,525.322 1237.61,318.488 1239.92,207.691 1242.23,384.299 1244.54,225.024 1246.85,456.454 1249.15,527.045 1251.46,156.241 1253.77,351.868 1256.08,316.276 1258.39,265.612 1260.69,483.329 1263,460.598 1265.31,479.505 1267.62,473.825 1269.93,427.922 1272.23,535.012 1274.54,356.377 1276.85,298.888 1279.16,700.204 1281.47,322.43 1283.77,326.58 1286.08,400.326 1288.39,500.911 1290.7,360.279 1293,249.949 1295.31,386.392 1297.62,427.278 1299.93,376.7 1302.24,348.98 1304.54,563.775 1306.85,507.104 1309.16,372.705 1311.47,418.674 1313.78,408.058 1316.08,307.447 1318.39,253.124 1320.7,392.416 1323.01,404.9 1325.32,537.604 1327.62,436.455 1329.93,278.888 1332.24,436.016 1334.55,417.11 1336.86,296.212 1339.16,208.014 1341.47,452.236 1343.78,476.787 1346.09,376.149 1348.39,291.337 1350.7,296.001 1353.01,306.766 1355.32,531.473 1357.63,432.373 1359.93,388.14 1362.24,291.086 1364.55,423.933 1366.86,356.303 1369.17,343.331 1371.47,405.829 1373.78,429.45 1376.09,433.887 1378.4,288.764 1380.71,455.651 1383.01,541.056 1385.32,452.151 1387.63,310.093 1389.94,126.477 1392.24,351.494 1394.55,318.913 1396.86,389.566 1399.17,428.399 1401.48,339.792 1403.78,230.156 1406.09,485.296 1408.4,449.642 1410.71,370.545 1413.02,249.071 1415.32,481.763 1417.63,456.56 1419.94,338.551 1422.25,504.299 1424.56,366.065 1426.86,344.518 1429.17,236.564 1431.48,371.326 1433.79,403.099 1436.1,263.533 1438.4,366.703 1440.71,431.907 1443.02,400.288 1445.33,499.585 1447.63,366.11 1449.94,563.101 1452.25,320.907 1454.56,310.09 1456.87,392.02 1459.17,441.071 1461.48,305.853 1463.79,421.565 1466.1,617.542 1468.41,133.181 1470.71,282.452 1473.02,472.694 1475.33,335.444 1477.64,396.984 1479.95,346.26 1482.25,413.183 1484.56,446.563 1486.87,340.026 1489.18,471.433 1491.49,465.005 1493.79,442.418 1496.1,507.417 1498.41,228.339 1500.72,454.781 1503.02,264.673 1505.33,283.307 1507.64,416.396 1509.95,396.481 1512.26,358.669 1514.56,687.235 1516.87,386.312 1519.18,444.784 1521.49,445.747 1523.8,377.089 1526.1,518.336 1528.41,442.605 1530.72,347.405 1533.03,306.218 1535.34,468.824 1537.64,226.424 1539.95,288.594 1542.26,484.252 1544.57,343.061 1546.88,483.674 1549.18,380.718 1551.49,526.032 1553.8,354.976 1556.11,235.752 1558.41,462.243 1560.72,395.891 1563.03,365.303 1565.34,391.867 1567.65,382.952 1569.95,333.665 1572.26,284.117 1574.57,285.535 1576.88,449.082 1579.19,386.255 1581.49,167.231 1583.8,359.509 1586.11,543.321 1588.42,386.564 1590.73,366.378 1593.03,406.281 1595.34,489.717 1597.65,440.329 1599.96,377.043 1602.26,227.83 1604.57,252.214 1606.88,539.052 1609.19,365.329 1611.5,276.062 1613.8,422.235 1616.11,482.016 1618.42,447.696 1620.73,307.522 1623.04,569.707 1625.34,383.945 1627.65,372.487 1629.96,301.678 1632.27,384.44 1634.58,491.716 1636.88,383.786 1639.19,387.848 1641.5,448.742 1643.81,361.434 1646.12,248.208 1648.42,253.512 1650.73,277.83 1653.04,397.58 1655.35,410.633 1657.65,427.782 1659.96,387.549 1662.27,371.905 1664.58,380.193 1666.89,490.298 1669.19,368.714 1671.5,438.571 1673.81,246.161 1676.12,291.362 1678.43,580.868 1680.73,295.511 1683.04,454.526 1685.35,379.253 1687.66,243.525 1689.97,340.615 1692.27,559.6 1694.58,464.299 1696.89,330.98 1699.2,255.739 1701.51,379.58 1703.81,436.46 1706.12,326.644 1708.43,421.887 1710.74,276.398 1713.04,198.877 1715.35,475.4 1717.66,255.097 1719.97,543.098 1722.28,338.776 1724.58,460.139 1726.89,526.119 1729.2,278.165 1731.51,309.786 1733.82,466.114 1736.12,280.461 1738.43,375.573 1740.74,359.212 1743.05,199.632 1745.36,395.917 1747.66,390.082 1749.97,467.091 1752.28,441.648 1754.59,458.945 1756.9,465.291 1759.2,441.423 1761.51,450.47 1763.82,561.786 1766.13,340.947 1768.43,381.031 1770.74,321.454 1773.05,577.146 1775.36,337.854 1777.67,591.621 1779.97,504.448 1782.28,338.119 1784.59,447.203 1786.9,515.554 1789.21,248.704 1791.51,335.077 1793.82,387.149 1796.13,462.331 1798.44,403.608 1800.75,269.521 1803.05,464.595 1805.36,415.637 1807.67,294.953 1809.98,337.927 1812.28,325.451 1814.59,433.108 1816.9,443.339 1819.21,465.585 1821.52,435.267 1823.82,375.445 1826.13,591.307 1828.44,458.93 1830.75,525.486 1833.06,495.812 1835.36,302.998 1837.67,142.215 1839.98,610.162 1842.29,449.852 1844.6,273.973 1846.9,309.629 1849.21,493.311 1851.52,430.971 1853.83,441.355 1856.14,298.607 1858.44,365.707 1860.75,272.628 1863.06,209.847 1865.37,436.605 1867.67,387.818 1869.98,390.28 1872.29,456.631 1874.6,452.609 1876.91,385.23 1879.21,359.103 1881.52,386.689 1883.83,565.622 1886.14,382.481 1888.45,525.494 1890.75,331.242 1893.06,437.418 1895.37,254.306 1897.68,187.248 1899.99,437.885 1902.29,311.759 1904.6,339.083 1906.91,459.127 1909.22,549.538 1911.53,415.19 1913.83,294.261 1916.14,294.798 1918.45,249.401 1920.76,297.258 1923.06,494.06 1925.37,319.685 1927.68,382.992 1929.99,392.291 1932.3,466.367 1934.6,476.154 1936.91,287.452 1939.22,423.18 1941.53,277.08 1943.84,436.107 1946.14,408.403 1948.45,541.059 1950.76,416.578 1953.07,534.709 1955.38,253.034 1957.68,347.644 1959.99,493.91 1962.3,358.161 1964.61,324.704 1966.91,235.146 1969.22,278.191 1971.53,446.626 1973.84,344.887 1976.15,363.163 1978.45,494.888 1980.76,453.233 1983.07,321.466 1985.38,335.831 1987.69,472.021 1989.99,374.918 1992.3,483.171 1994.61,373.713 1996.92,583.096 1999.23,457.286 2001.53,361.395 2003.84,140.049 2006.15,419.649 2008.46,430.744 2010.77,317.484 2013.07,390.522 2015.38,414.753 2017.69,276.515 2020,369.312 2022.3,432.842 2024.61,343.256 2026.92,422.061 2029.23,388.566 2031.54,532.329 2033.84,366.929 2036.15,497.397 2038.46,347.996 2040.77,517.38 2043.08,338.295 2045.38,492.213 2047.69,358.989 2050,336.407 2052.31,327.205 2054.62,310.173 2056.92,102.007 2059.23,402.19 2061.54,372.285 2063.85,209.828 2066.16,445.076 2068.46,306.77 2070.77,429.916 2073.08,357.198 2075.39,285.368 2077.69,361 2080,430.772 2082.31,426.182 2084.62,186.507 2086.93,282.652 2089.23,316.376 2091.54,424.391 2093.85,380.094 2096.16,427.708 2098.47,434.258 2100.77,341.518 2103.08,256.855 2105.39,457.569 2107.7,429.044 2110.01,391.6 2112.31,314.292 2114.62,264.826 2116.93,373.055 2119.24,520.848 2121.55,385.183 2123.85,212.588 2126.16,130.016 2128.47,187.989 2130.78,386.388 2133.08,418.297 2135.39,376.206 2137.7,506.735 2140.01,480.177 2142.32,432.569 2144.62,255.544 2146.93,169.921 2149.24,398.427 2151.55,390.576 2153.86,445.142 2156.16,496.094 2158.47,301.901 2160.78,359.273 2163.09,442.055 2165.4,244.568 2167.7,410.496 2170.01,446.939 2172.32,360.75 2174.63,454.788 2176.93,371.515 2179.24,355.882 2181.55,156.292 2183.86,452.165 2186.17,252.625 2188.47,282.616 2190.78,434.659 2193.09,409.133 2195.4,242.323 2197.71,410.532 2200.01,517.038 2202.32,412.196 2204.63,543.429 2206.94,450.607 2209.25,437.675 2211.55,633.647 2213.86,344.028 2216.17,334.994 2218.48,473.369 2220.79,474.846 2223.09,283.361 2225.4,524.459 2227.71,402.246 2230.02,692.66 2232.32,679.471 2234.63,489.999 2236.94,354.459 2239.25,317.666 2241.56,274.728 2243.86,422.193 2246.17,464.741 2248.48,665.358 2250.79,410.466 2253.1,461.916 2255.4,478.866 2257.71,258.888 2260.02,328.275 2262.33,416.612 2264.64,322.072 2266.94,242.511 2269.25,403.636 2271.56,480.672 2273.87,220.573 2276.18,421.115 2278.48,185.235 2280.79,384.061 2283.1,310.361 2285.41,215.679 2287.71,463.597 2290.02,262.596 2292.33,391.776 2294.64,354.953 2296.95,194.001 2299.25,417.452 2301.56,536.546 2303.87,160.806 2306.18,547.89 2308.49,494.985 2310.79,346.877 2313.1,520.104 2315.41,437.819 2317.72,511.034 2320.03,285.228 2322.33,441.437 2324.64,451.182 2326.95,437.852 2329.26,325.534 2331.56,435.333 2333.87,643.274 2336.18,399.341 2338.49,437.969 2340.8,452.037 2343.1,470.851 2345.41,351.252 2347.72,278.202 2350.03,317.593 2352.34,367.268 2354.64,370.591 2356.95,562.588 2359.26,354.572 2361.57,468.746 2363.88,492.93 2366.18,336.066 2368.49,321.65 2370.8,296.923 2373.11,391.911 2375.42,223.599 2377.72,459.724 2380.03,537.247 2382.34,261.307 2384.65,418.989 2386.95,410.584 2389.26,228.191 2391.57,302.762 2393.88,597.9 2396.19,435.341 2398.49,407.685 2400.8,564.957 2403.11,341.553 2405.42,491.189 2407.73,573.727 2410.03,425.583 2412.34,353.106 2414.65,490.429 2416.96,240.648 2419.27,538.137 2421.57,321.444 2423.88,464.805 2426.19,388.423 2428.5,455.041 2430.81,510.458 2433.11,470.484 2435.42,309.85 2437.73,469.598 2440.04,369.569 2442.34,308.089 2444.65,451.793 2446.96,438.319 2449.27,634.631 2451.58,385.214 2453.88,575.547 2456.19,341.83 2458.5,526.429 2460.81,593.216 2463.12,483.891 2465.42,367.848 2467.73,474.867 2470.04,553.182 2472.35,325.613 2474.66,362.759 2476.96,293.257 2479.27,481.522 2481.58,443.051 2483.89,246.643 2486.2,429.567 2488.5,306.735 2490.81,250.207 2493.12,271.699 2495.43,315.451 2497.73,446.623 2500.04,486.104 2502.35,382.526 2504.66,463.335 2506.97,485.87 2509.27,515.936 2511.58,430.637 2513.89,371.993 2516.2,364.676 2518.51,534.606 2520.81,520.604 2523.12,438.298 2525.43,373.992 2527.74,282.547 2530.05,304.447 2532.35,322.587 2534.66,218.407 2536.97,299.786 2539.28,374.481 2541.58,431.877 2543.89,346.823 2546.2,449.644 2548.51,320.139 2550.82,436.576 2553.12,366.342 2555.43,446.67 2557.74,429.382 2560.05,276.618 2562.36,378.981 2564.66,238.447 2566.97,551.744 2569.28,259.033 2571.59,348.269 "></polyline>
</svg>
</div>
</div>
<p>Look at that! Things are working; amazin’.</p>
<p>We can also exploit <a href="https://github.com/TuringLang/AbstractMCMC.jl">AbstractMCMC.jl</a>’s parallel sampling capabilities:</p>
<div id="34" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Run separate 4 chains for 10 000 iterations using threads to parallelize.</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>num_chains <span class="op">=</span> <span class="fl">4</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>samples <span class="op">=</span> <span class="fu">sample</span>(</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>    model_with_grad,</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>    sampler,</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">MCMCThreads</span>(),</span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>    <span class="fl">10_000</span>,</span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>    num_chains;</span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Note we need to provide an initial state for every chain.</span></span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>    initial_state<span class="op">=</span><span class="fu">fill</span>(state, num_chains),</span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>    progress<span class="op">=</span><span class="cn">false</span></span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a>samples_array <span class="op">=</span> <span class="fu">stack</span>(<span class="fu">map</span>(<span class="bu">Base</span>.<span class="fu">Fix1</span>(stack, sample <span class="op">-&gt;</span> sample.x), samples))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>3×10000×4 Array{Float64, 3}:
[:, :, 1] =
 -3.68172   -3.43313   -3.43313   …  -3.79814  -3.43632   -3.43632
  0.961222   0.927737   0.927737     -1.18959  -0.254413  -0.254413
  1.67831    4.56684    4.56684       4.70291   4.77544    4.77544

[:, :, 2] =
 -1.28863   -2.63978   -3.32862   …  -4.68058   -4.68058   -5.61606
  0.860721   0.372971  -0.513387     -0.600335  -0.600335  -1.48289
  2.00415    3.6949     4.95474       4.412      4.412      2.39897

[:, :, 3] =
 -0.73838   -0.850532  -3.31112   -3.76343   …  -3.89926  -3.92415  -3.92415
 -0.489777  -0.939985   0.496887   0.359318      1.97058   1.27792   1.27792
  2.25735    2.79108    2.63356    2.38798       6.20774   5.2362    5.2362

[:, :, 4] =
 -2.4734    -1.83707     -5.04586     …  -4.73841     -4.35234   -4.37602
 -0.555499   0.00287199  -0.00840154     -0.00466808   0.408386   0.596505
  3.93079    5.45529      3.88932         3.02192      3.02329    3.60348</code></pre>
</div>
</div>
<p>But the fact that we have to provide the <code>AbstractMCMC.sample</code> call, etc. with an <code>initial_state</code> to get started is a bit annoying. We can avoid this by also defining a <code>AbstractMCMC.step</code> <em>without</em> the <code>state</code> argument:</p>
<div id="36" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> AbstractMCMC.<span class="fu">step</span>(</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>    rng<span class="op">::</span><span class="dt">Random.AbstractRNG</span>,</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>    model_wrapper<span class="op">::</span><span class="dt">AbstractMCMC.LogDensityModel</span>,</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>    <span class="op">::</span><span class="dt">MALA</span>;</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># </span><span class="al">NOTE</span><span class="co">: No state provided!</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>    kwargs<span class="op">...</span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>    model <span class="op">=</span> model_wrapper.logdensity</span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Let's just create the initial state by sampling using  a Gaussian.</span></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>    x <span class="op">=</span> <span class="fu">randn</span>(rng, LogDensityProblems.<span class="fu">dimension</span>(model))</span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="fu">MALASample</span>(x), <span class="fu">MALAState</span>(x)</span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Equipped with this, we no longer need to provide the <code>initial_state</code> everywhere:</p>
<div id="38" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>samples <span class="op">=</span> <span class="fu">sample</span>(model_with_grad, sampler, <span class="fl">10_000</span>; progress<span class="op">=</span><span class="cn">false</span>)</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>samples_matrix <span class="op">=</span> <span class="fu">stack</span>(sample <span class="op">-&gt;</span> sample.x, samples)</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a><span class="fu">hcat</span>(<span class="fu">mean</span>(samples_matrix; dims<span class="op">=</span><span class="fl">2</span>), <span class="fu">std</span>(samples_matrix; dims<span class="op">=</span><span class="fl">2</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>3×2 Matrix{Float64}:
 -5.00693   0.999322
 -0.010745  1.00959
  5.04686   0.992169</code></pre>
</div>
</div>
</section>
<section id="using-our-sampler-with-turing.jl" class="level2">
<h2 class="anchored" data-anchor-id="using-our-sampler-with-turing.jl">Using our sampler with Turing.jl</h2>
<p>As we promised, all of this hassle of implementing our <code>MALA</code> sampler in a way that uses <a href="https://github.com/tpapp/LogDensityProblems.jl">LogDensityProblems.jl</a> and <a href="https://github.com/TuringLang/AbstractMCMC.jl">AbstractMCMC.jl</a> gets us something more than <em>just</em> an “automatic” implementation of <code>AbstractMCMC.sample</code>.</p>
<p>It also enables use with Turing.jl through the <code>externalsampler</code>, but we need to do one final thing first: we need to tell Turing.jl how to extract a vector of parameters from the “sample” returned in our implementation of <code>AbstractMCMC.step</code>. In our case, the “sample” is a <code>MALASample</code>, so we just need the following line:</p>
<div id="40" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load Turing.jl.</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">Turing</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Overload the `getparams` method for our "sample" type, which is just a vector.</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>Turing.Inference.<span class="fu">getparams</span>(<span class="op">::</span><span class="dt">Turing.Model</span>, sample<span class="op">::</span><span class="dt">MALASample</span>) <span class="op">=</span> sample.x</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>And with that, we’re good to go!</p>
<div id="42" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Our previous model defined as a Turing.jl model.</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="pp">@model</span> <span class="fu">mvnormal_model</span>() <span class="op">=</span> x <span class="op">~</span> <span class="fu">MvNormal</span>([<span class="op">-</span><span class="fl">5</span>., <span class="fl">0</span>., <span class="fl">5</span>.], I)</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Instantiate our model.</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>turing_model <span class="op">=</span> <span class="fu">mvnormal_model</span>()</span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Call `sample` but now we're passing in a Turing.jl `model` and wrapping</span></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a><span class="co"># our `MALA` sampler in the `externalsampler` to tell Turing.jl that the sampler</span></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a><span class="co"># expects something that implements LogDensityProblems.jl.</span></span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>chain <span class="op">=</span> <span class="fu">sample</span>(turing_model, <span class="fu">externalsampler</span>(sampler), <span class="fl">10_000</span>; progress<span class="op">=</span><span class="cn">false</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<div class="ansi-escaped-output">
<pre>Chains MCMC chain (10000×4×1 Array{Float64, 3}):

Iterations        = 1:1:10000
Number of chains  = 1
Samples per chain = 10000
Wall duration     = 2.54 seconds
Compute duration  = 2.54 seconds
parameters        = x[1], x[2], x[3]
internals         = lp

Summary Statistics
 <span class="ansi-bold"> parameters </span> <span class="ansi-bold">    mean </span> <span class="ansi-bold">     std </span> <span class="ansi-bold">    mcse </span> <span class="ansi-bold">  ess_bulk </span> <span class="ansi-bold">  ess_tail </span> <span class="ansi-bold">    rhat </span>  ⋯
 <span class="ansi-bright-black-fg">     Symbol </span> <span class="ansi-bright-black-fg"> Float64 </span> <span class="ansi-bright-black-fg"> Float64 </span> <span class="ansi-bright-black-fg"> Float64 </span> <span class="ansi-bright-black-fg">   Float64 </span> <span class="ansi-bright-black-fg">   Float64 </span> <span class="ansi-bright-black-fg"> Float64 </span>  ⋯

        x[1]   -5.0187    1.0166    0.0180   3198.9439   5149.5887    1.0008   ⋯
        x[2]   -0.0165    0.9991    0.0172   3359.2027   5115.0729    1.0002   ⋯
        x[3]    5.0142    0.9907    0.0170   3403.8935   5363.5404    1.0000   ⋯
<span class="ansi-cyan-fg">                                                                1 column omitted</span>

Quantiles
 <span class="ansi-bold"> parameters </span> <span class="ansi-bold">    2.5% </span> <span class="ansi-bold">   25.0% </span> <span class="ansi-bold">   50.0% </span> <span class="ansi-bold">   75.0% </span> <span class="ansi-bold">   97.5% </span>
 <span class="ansi-bright-black-fg">     Symbol </span> <span class="ansi-bright-black-fg"> Float64 </span> <span class="ansi-bright-black-fg"> Float64 </span> <span class="ansi-bright-black-fg"> Float64 </span> <span class="ansi-bright-black-fg"> Float64 </span> <span class="ansi-bright-black-fg"> Float64 </span>

        x[1]   -7.0221   -5.6855   -5.0166   -4.3357   -3.0406
        x[2]   -1.9782   -0.6910   -0.0117    0.6433    1.9434
        x[3]    3.0281    4.3553    5.0110    5.6829    6.9221
</pre>
</div>
</div>
</div>
<p>Pretty neat, eh?</p>
<section id="models-with-constrained-parameters" class="level3">
<h3 class="anchored" data-anchor-id="models-with-constrained-parameters">Models with constrained parameters</h3>
<p>One thing we’ve sort of glossed over in all of the above is that MALA, at least how we’ve implemented it, requires <span class="math inline">\(x\)</span> to live in <span class="math inline">\(\mathbb{R}^d\)</span> for some <span class="math inline">\(d &gt; 0\)</span>. If some of the parameters were in fact constrained, e.g.&nbsp;we were working with a <code>Beta</code> distribution which has support on the interval <span class="math inline">\((0, 1)\)</span>, <em>not</em> on <span class="math inline">\(\mathbb{R}^d\)</span>, we could easily end up outside of the valid range <span class="math inline">\((0, 1)\)</span>.</p>
<div id="44" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="pp">@model</span> <span class="fu">beta_model</span>() <span class="op">=</span> x <span class="op">~</span> <span class="fu">Beta</span>(<span class="fl">3</span>, <span class="fl">3</span>)</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>turing_model <span class="op">=</span> <span class="fu">beta_model</span>()</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>chain <span class="op">=</span> <span class="fu">sample</span>(turing_model, <span class="fu">externalsampler</span>(sampler), <span class="fl">10_000</span>; progress<span class="op">=</span><span class="cn">false</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<div class="ansi-escaped-output">
<pre>Chains MCMC chain (10000×2×1 Array{Float64, 3}):

Iterations        = 1:1:10000
Number of chains  = 1
Samples per chain = 10000
Wall duration     = 1.66 seconds
Compute duration  = 1.66 seconds
parameters        = x
internals         = lp

Summary Statistics
 <span class="ansi-bold"> parameters </span> <span class="ansi-bold">    mean </span> <span class="ansi-bold">     std </span> <span class="ansi-bold">    mcse </span> <span class="ansi-bold">  ess_bulk </span> <span class="ansi-bold">  ess_tail </span> <span class="ansi-bold">    rhat </span>  ⋯
 <span class="ansi-bright-black-fg">     Symbol </span> <span class="ansi-bright-black-fg"> Float64 </span> <span class="ansi-bright-black-fg"> Float64 </span> <span class="ansi-bright-black-fg"> Float64 </span> <span class="ansi-bright-black-fg">   Float64 </span> <span class="ansi-bright-black-fg">   Float64 </span> <span class="ansi-bright-black-fg"> Float64 </span>  ⋯

           x    0.4999    0.1894    0.0028   4569.8024   5576.4397    1.0005   ⋯
<span class="ansi-cyan-fg">                                                                1 column omitted</span>

Quantiles
 <span class="ansi-bold"> parameters </span> <span class="ansi-bold">    2.5% </span> <span class="ansi-bold">   25.0% </span> <span class="ansi-bold">   50.0% </span> <span class="ansi-bold">   75.0% </span> <span class="ansi-bold">   97.5% </span>
 <span class="ansi-bright-black-fg">     Symbol </span> <span class="ansi-bright-black-fg"> Float64 </span> <span class="ansi-bright-black-fg"> Float64 </span> <span class="ansi-bright-black-fg"> Float64 </span> <span class="ansi-bright-black-fg"> Float64 </span> <span class="ansi-bright-black-fg"> Float64 </span>

           x    0.1450    0.3577    0.4999    0.6405    0.8533
</pre>
</div>
</div>
</div>
<p>Yep, that still works, but only because Turing.jl actually <em>transforms</em> the <code>turing_model</code> from constrained to unconstrained, so that the <code>sampler</code> provided to <code>externalsampler</code> is actually always working in unconstrained space! This is not always desirable, so we can turn this off:</p>
<div id="46" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>chain <span class="op">=</span> <span class="fu">sample</span>(turing_model, <span class="fu">externalsampler</span>(sampler; unconstrained<span class="op">=</span><span class="cn">false</span>), <span class="fl">10_000</span>; progress<span class="op">=</span><span class="cn">false</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<div class="ansi-escaped-output">
<pre>Chains MCMC chain (10000×2×1 Array{Float64, 3}):

Iterations        = 1:1:10000
Number of chains  = 1
Samples per chain = 10000
Wall duration     = 0.25 seconds
Compute duration  = 0.25 seconds
parameters        = x
internals         = lp

Summary Statistics
 <span class="ansi-bold"> parameters </span> <span class="ansi-bold">    mean </span> <span class="ansi-bold">     std </span> <span class="ansi-bold">    mcse </span> <span class="ansi-bold"> ess_bulk </span> <span class="ansi-bold"> ess_tail </span> <span class="ansi-bold">    rhat </span> <span class="ansi-bold"> e</span> ⋯
 <span class="ansi-bright-black-fg">     Symbol </span> <span class="ansi-bright-black-fg"> Float64 </span> <span class="ansi-bright-black-fg"> Float64 </span> <span class="ansi-bright-black-fg"> Float64 </span> <span class="ansi-bright-black-fg">  Float64 </span> <span class="ansi-bright-black-fg">  Float64 </span> <span class="ansi-bright-black-fg"> Float64 </span> <span class="ansi-bright-black-fg">  </span> ⋯

           x    0.8471    0.0000    0.0000        NaN        NaN       NaN     ⋯
<span class="ansi-cyan-fg">                                                                1 column omitted</span>

Quantiles
 <span class="ansi-bold"> parameters </span> <span class="ansi-bold">    2.5% </span> <span class="ansi-bold">   25.0% </span> <span class="ansi-bold">   50.0% </span> <span class="ansi-bold">   75.0% </span> <span class="ansi-bold">   97.5% </span>
 <span class="ansi-bright-black-fg">     Symbol </span> <span class="ansi-bright-black-fg"> Float64 </span> <span class="ansi-bright-black-fg"> Float64 </span> <span class="ansi-bright-black-fg"> Float64 </span> <span class="ansi-bright-black-fg"> Float64 </span> <span class="ansi-bright-black-fg"> Float64 </span>

           x    0.8471    0.8471    0.8471    0.8471    0.8471
</pre>
</div>
</div>
</div>
<p>The fun thing is that this still sort of works because</p>
<div id="48" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">logpdf</span>(<span class="fu">Beta</span>(<span class="fl">3</span>, <span class="fl">3</span>), <span class="fl">10.0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>-Inf</code></pre>
</div>
</div>
<p>and so the samples that fall outside of the range are always rejected. But do notice how much worse all the diagnostics are, e.g.&nbsp;<code>ess_tail</code> is very poor compared to when we use <code>unconstrained=true</code>. Moreover, in more complex cases this won’t just result in a “nice” <code>-Inf</code> log-density value, but instead will error:</p>
<div id="50" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="pp">@model</span> <span class="kw">function</span> <span class="fu">demo</span>()</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>    σ² <span class="op">~</span> <span class="fu">truncated</span>(<span class="fu">Normal</span>(), lower<span class="op">=</span><span class="fl">0</span>)</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># If we end up with negative values for `σ²`, the `Normal` will error.</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>    x <span class="op">~</span> <span class="fu">Normal</span>(<span class="fl">0</span>, σ²)</span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a><span class="fu">sample</span>(<span class="fu">demo</span>(), <span class="fu">externalsampler</span>(sampler; unconstrained<span class="op">=</span><span class="cn">false</span>), <span class="fl">10_000</span>; progress<span class="op">=</span><span class="cn">false</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<div class="ansi-escaped-output">
<pre>DomainError with Dual{ForwardDiff.Tag{DynamicPPL.DynamicPPLTag, Float64}}(-0.6330045261429667,1.0,0.0):
Normal: the condition σ &gt;= zero(σ) is not satisfied.
Stacktrace:
  [1] <span class="ansi-bold">#371</span>
<span class="ansi-bright-black-fg">    @</span> <span class="ansi-bright-black-fg">~/.julia/packages/Distributions/ji8PW/src/univariate/continuous/</span><span style="text-decoration:underline" class="ansi-bright-black-fg">normal.jl:37</span><span class="ansi-bright-black-fg"> [inlined]</span>
  [2] <span class="ansi-bold">check_args</span>
<span class="ansi-bright-black-fg">    @</span> <span class="ansi-bright-black-fg">~/.julia/packages/Distributions/ji8PW/src/</span><span style="text-decoration:underline" class="ansi-bright-black-fg">utils.jl:89</span><span class="ansi-bright-black-fg"> [inlined]</span>
  [3] <span class="ansi-bold">#Normal#370</span>
<span class="ansi-bright-black-fg">    @</span> <span class="ansi-bright-black-fg">~/.julia/packages/Distributions/ji8PW/src/univariate/continuous/</span><span style="text-decoration:underline" class="ansi-bright-black-fg">normal.jl:37</span><span class="ansi-bright-black-fg"> [inlined]</span>
  [4] <span class="ansi-bold">Normal</span>
<span class="ansi-bright-black-fg">    @</span> <span class="ansi-bright-black-fg">~/.julia/packages/Distributions/ji8PW/src/univariate/continuous/</span><span style="text-decoration:underline" class="ansi-bright-black-fg">normal.jl:36</span><span class="ansi-bright-black-fg"> [inlined]</span>
  [5] <span class="ansi-bold">Normal</span>
<span class="ansi-bright-black-fg">    @</span> <span class="ansi-bright-black-fg">~/.julia/packages/Distributions/ji8PW/src/univariate/continuous/</span><span style="text-decoration:underline" class="ansi-bright-black-fg">normal.jl:42</span><span class="ansi-bright-black-fg"> [inlined]</span>
  [6] <span class="ansi-bold">macro expansion</span>
<span class="ansi-bright-black-fg">    @</span> <span class="ansi-bright-black-fg">~/.julia/packages/DynamicPPL/E4kDs/src/</span><span style="text-decoration:underline" class="ansi-bright-black-fg">compiler.jl:579</span><span class="ansi-bright-black-fg"> [inlined]</span>
  [7] <span class="ansi-bold">demo</span><span class="ansi-bold">(</span><span class="ansi-bright-black-fg">__model__</span>::DynamicPPL.Model<span class="ansi-bright-black-fg">{typeof(demo), (), (), (), Tuple{}, Tuple{}, DynamicPPL.DefaultContext}</span>, <span class="ansi-bright-black-fg">__varinfo__</span>::DynamicPPL.ThreadSafeVarInfo<span class="ansi-bright-black-fg">{DynamicPPL.TypedVarInfo{@NamedTuple{σ²::DynamicPPL.Metadata{Dict{AbstractPPL.VarName{:σ², typeof(identity)}, Int64}, Vector{Truncated{Normal{Float64}, Continuous, Float64, Float64, Nothing}}, Vector{AbstractPPL.VarName{:σ², typeof(identity)}}, Vector{ForwardDiff.Dual{ForwardDiff.Tag{DynamicPPL.DynamicPPLTag, Float64}, Float64, 2}}, Vector{Set{DynamicPPL.Selector}}}, x::DynamicPPL.Metadata{Dict{AbstractPPL.VarName{:x, typeof(identity)}, Int64}, Vector{Normal{Float64}}, Vector{AbstractPPL.VarName{:x, typeof(identity)}}, Vector{ForwardDiff.Dual{ForwardDiff.Tag{DynamicPPL.DynamicPPLTag, Float64}, Float64, 2}}, Vector{Set{DynamicPPL.Selector}}}}, ForwardDiff.Dual{ForwardDiff.Tag{DynamicPPL.DynamicPPLTag, Float64}, Float64, 2}}, Vector{Base.RefValue{ForwardDiff.Dual{ForwardDiff.Tag{DynamicPPL.DynamicPPLTag, Float64}, Float64, 2}}}}</span>, <span class="ansi-bright-black-fg">__context__</span>::DynamicPPL.DefaultContext<span class="ansi-bold">)</span>
<span class="ansi-bright-black-fg">    @</span> <span class="ansi-magenta-fg">Main.Notebook</span> <span class="ansi-bright-black-fg">~/work/docs/docs/tutorials/docs-17-implementing-samplers/</span><span style="text-decoration:underline" class="ansi-bright-black-fg">index.qmd:454</span>
  [8] <span class="ansi-bold">_evaluate!!</span>
<span class="ansi-bright-black-fg">    @</span> <span class="ansi-bright-black-fg">~/.julia/packages/DynamicPPL/E4kDs/src/</span><span style="text-decoration:underline" class="ansi-bright-black-fg">model.jl:963</span><span class="ansi-bright-black-fg"> [inlined]</span>
  [9] <span class="ansi-bold">evaluate_threadsafe!!</span><span class="ansi-bold">(</span><span class="ansi-bright-black-fg">model</span>::DynamicPPL.Model<span class="ansi-bright-black-fg">{typeof(demo), (), (), (), Tuple{}, Tuple{}, DynamicPPL.DefaultContext}</span>, <span class="ansi-bright-black-fg">varinfo</span>::DynamicPPL.TypedVarInfo<span class="ansi-bright-black-fg">{@NamedTuple{σ²::DynamicPPL.Metadata{Dict{AbstractPPL.VarName{:σ², typeof(identity)}, Int64}, Vector{Truncated{Normal{Float64}, Continuous, Float64, Float64, Nothing}}, Vector{AbstractPPL.VarName{:σ², typeof(identity)}}, Vector{ForwardDiff.Dual{ForwardDiff.Tag{DynamicPPL.DynamicPPLTag, Float64}, Float64, 2}}, Vector{Set{DynamicPPL.Selector}}}, x::DynamicPPL.Metadata{Dict{AbstractPPL.VarName{:x, typeof(identity)}, Int64}, Vector{Normal{Float64}}, Vector{AbstractPPL.VarName{:x, typeof(identity)}}, Vector{ForwardDiff.Dual{ForwardDiff.Tag{DynamicPPL.DynamicPPLTag, Float64}, Float64, 2}}, Vector{Set{DynamicPPL.Selector}}}}, ForwardDiff.Dual{ForwardDiff.Tag{DynamicPPL.DynamicPPLTag, Float64}, Float64, 2}}</span>, <span class="ansi-bright-black-fg">context</span>::DynamicPPL.DefaultContext<span class="ansi-bold">)</span>
<span class="ansi-bright-black-fg">    @</span> <span class="ansi-cyan-fg">DynamicPPL</span> <span class="ansi-bright-black-fg">~/.julia/packages/DynamicPPL/E4kDs/src/</span><span style="text-decoration:underline" class="ansi-bright-black-fg">model.jl:952</span>
 [10] <span class="ansi-bold">evaluate!!</span>
<span class="ansi-bright-black-fg">    @</span> <span class="ansi-bright-black-fg">~/.julia/packages/DynamicPPL/E4kDs/src/</span><span style="text-decoration:underline" class="ansi-bright-black-fg">model.jl:887</span><span class="ansi-bright-black-fg"> [inlined]</span>
 [11] <span class="ansi-bold">logdensity</span>
<span class="ansi-bright-black-fg">    @</span> <span class="ansi-bright-black-fg">~/.julia/packages/DynamicPPL/E4kDs/src/</span><span style="text-decoration:underline" class="ansi-bright-black-fg">logdensityfunction.jl:94</span><span class="ansi-bright-black-fg"> [inlined]</span>
 [12] <span class="ansi-bold">Fix1</span>
<span class="ansi-bright-black-fg">    @</span> <span class="ansi-bright-black-fg">./</span><span style="text-decoration:underline" class="ansi-bright-black-fg">operators.jl:1118</span><span class="ansi-bright-black-fg"> [inlined]</span>
 [13] <span class="ansi-bold">vector_mode_dual_eval!</span><span class="ansi-bold">(</span><span class="ansi-bright-black-fg">f</span>::Base.Fix1<span class="ansi-bright-black-fg">{typeof(LogDensityProblems.logdensity), LogDensityFunction{DynamicPPL.TypedVarInfo{@NamedTuple{σ²::DynamicPPL.Metadata{Dict{AbstractPPL.VarName{:σ², typeof(identity)}, Int64}, Vector{Truncated{Normal{Float64}, Continuous, Float64, Float64, Nothing}}, Vector{AbstractPPL.VarName{:σ², typeof(identity)}}, Vector{Float64}, Vector{Set{DynamicPPL.Selector}}}, x::DynamicPPL.Metadata{Dict{AbstractPPL.VarName{:x, typeof(identity)}, Int64}, Vector{Normal{Float64}}, Vector{AbstractPPL.VarName{:x, typeof(identity)}}, Vector{Float64}, Vector{Set{DynamicPPL.Selector}}}}, Float64}, DynamicPPL.Model{typeof(demo), (), (), (), Tuple{}, Tuple{}, DynamicPPL.DefaultContext}, DynamicPPL.DefaultContext}}</span>, <span class="ansi-bright-black-fg">cfg</span>::ForwardDiff.GradientConfig<span class="ansi-bright-black-fg">{ForwardDiff.Tag{DynamicPPL.DynamicPPLTag, Float64}, Float64, 2, Vector{ForwardDiff.Dual{ForwardDiff.Tag{DynamicPPL.DynamicPPLTag, Float64}, Float64, 2}}}</span>, <span class="ansi-bright-black-fg">x</span>::Vector<span class="ansi-bright-black-fg">{Float64}</span><span class="ansi-bold">)</span>
<span class="ansi-bright-black-fg">    @</span> <span class="ansi-green-fg">ForwardDiff</span> <span class="ansi-bright-black-fg">~/.julia/packages/ForwardDiff/PcZ48/src/</span><span style="text-decoration:underline" class="ansi-bright-black-fg">apiutils.jl:24</span>
 [14] <span class="ansi-bold">vector_mode_gradient!</span><span class="ansi-bold">(</span><span class="ansi-bright-black-fg">result</span>::DiffResults.MutableDiffResult<span class="ansi-bright-black-fg">{1, Float64, Tuple{Vector{Float64}}}</span>, <span class="ansi-bright-black-fg">f</span>::Base.Fix1<span class="ansi-bright-black-fg">{typeof(LogDensityProblems.logdensity), LogDensityFunction{DynamicPPL.TypedVarInfo{@NamedTuple{σ²::DynamicPPL.Metadata{Dict{AbstractPPL.VarName{:σ², typeof(identity)}, Int64}, Vector{Truncated{Normal{Float64}, Continuous, Float64, Float64, Nothing}}, Vector{AbstractPPL.VarName{:σ², typeof(identity)}}, Vector{Float64}, Vector{Set{DynamicPPL.Selector}}}, x::DynamicPPL.Metadata{Dict{AbstractPPL.VarName{:x, typeof(identity)}, Int64}, Vector{Normal{Float64}}, Vector{AbstractPPL.VarName{:x, typeof(identity)}}, Vector{Float64}, Vector{Set{DynamicPPL.Selector}}}}, Float64}, DynamicPPL.Model{typeof(demo), (), (), (), Tuple{}, Tuple{}, DynamicPPL.DefaultContext}, DynamicPPL.DefaultContext}}</span>, <span class="ansi-bright-black-fg">x</span>::Vector<span class="ansi-bright-black-fg">{Float64}</span>, <span class="ansi-bright-black-fg">cfg</span>::ForwardDiff.GradientConfig<span class="ansi-bright-black-fg">{ForwardDiff.Tag{DynamicPPL.DynamicPPLTag, Float64}, Float64, 2, Vector{ForwardDiff.Dual{ForwardDiff.Tag{DynamicPPL.DynamicPPLTag, Float64}, Float64, 2}}}</span><span class="ansi-bold">)</span>
<span class="ansi-bright-black-fg">    @</span> <span class="ansi-green-fg">ForwardDiff</span> <span class="ansi-bright-black-fg">~/.julia/packages/ForwardDiff/PcZ48/src/</span><span style="text-decoration:underline" class="ansi-bright-black-fg">gradient.jl:96</span>
 [15] <span class="ansi-bold">gradient!</span>
<span class="ansi-bright-black-fg">    @</span> <span class="ansi-bright-black-fg">~/.julia/packages/ForwardDiff/PcZ48/src/</span><span style="text-decoration:underline" class="ansi-bright-black-fg">gradient.jl:37</span><span class="ansi-bright-black-fg"> [inlined]</span>
 [16] <span class="ansi-bold">gradient!</span>
<span class="ansi-bright-black-fg">    @</span> <span class="ansi-bright-black-fg">~/.julia/packages/ForwardDiff/PcZ48/src/</span><span style="text-decoration:underline" class="ansi-bright-black-fg">gradient.jl:35</span><span class="ansi-bright-black-fg"> [inlined]</span>
 [17] <span class="ansi-bold">logdensity_and_gradient</span>
<span class="ansi-bright-black-fg">    @</span> <span class="ansi-bright-black-fg">~/.julia/packages/LogDensityProblemsAD/rBlLq/ext/</span><span style="text-decoration:underline" class="ansi-bright-black-fg">LogDensityProblemsADForwardDiffExt.jl:118</span><span class="ansi-bright-black-fg"> [inlined]</span>
 [18] <span class="ansi-bold">leapfrog_step</span><span class="ansi-bold">(</span><span class="ansi-bright-black-fg">model</span>::LogDensityProblemsADForwardDiffExt.ForwardDiffLogDensity<span class="ansi-bright-black-fg">{LogDensityFunction{DynamicPPL.TypedVarInfo{@NamedTuple{σ²::DynamicPPL.Metadata{Dict{AbstractPPL.VarName{:σ², typeof(identity)}, Int64}, Vector{Truncated{Normal{Float64}, Continuous, Float64, Float64, Nothing}}, Vector{AbstractPPL.VarName{:σ², typeof(identity)}}, Vector{Float64}, Vector{Set{DynamicPPL.Selector}}}, x::DynamicPPL.Metadata{Dict{AbstractPPL.VarName{:x, typeof(identity)}, Int64}, Vector{Normal{Float64}}, Vector{AbstractPPL.VarName{:x, typeof(identity)}}, Vector{Float64}, Vector{Set{DynamicPPL.Selector}}}}, Float64}, DynamicPPL.Model{typeof(demo), (), (), (), Tuple{}, Tuple{}, DynamicPPL.DefaultContext}, DynamicPPL.DefaultContext}, ForwardDiff.Chunk{2}, ForwardDiff.Tag{DynamicPPL.DynamicPPLTag, Float64}, ForwardDiff.GradientConfig{ForwardDiff.Tag{DynamicPPL.DynamicPPLTag, Float64}, Float64, 2, Vector{ForwardDiff.Dual{ForwardDiff.Tag{DynamicPPL.DynamicPPLTag, Float64}, Float64, 2}}}}</span>, <span class="ansi-bright-black-fg">x</span>::Vector<span class="ansi-bright-black-fg">{Float64}</span>, <span class="ansi-bright-black-fg">p</span>::Vector<span class="ansi-bright-black-fg">{Float64}</span>, <span class="ansi-bright-black-fg">ϵ</span>::Int64, <span class="ansi-bright-black-fg">M</span>::UniformScaling<span class="ansi-bright-black-fg">{Bool}</span><span class="ansi-bold">)</span>
<span class="ansi-bright-black-fg">    @</span> <span class="ansi-magenta-fg">Main.Notebook</span> <span class="ansi-bright-black-fg">~/work/docs/docs/tutorials/docs-17-implementing-samplers/</span><span style="text-decoration:underline" class="ansi-bright-black-fg">index.qmd:303</span>
 [19] <span class="ansi-bold">step</span><span class="ansi-bold">(</span><span class="ansi-bright-black-fg">rng</span>::TaskLocalRNG, <span class="ansi-bright-black-fg">model_wrapper</span>::AbstractMCMC.LogDensityModel<span class="ansi-bright-black-fg">{LogDensityProblemsADForwardDiffExt.ForwardDiffLogDensity{LogDensityFunction{DynamicPPL.TypedVarInfo{@NamedTuple{σ²::DynamicPPL.Metadata{Dict{AbstractPPL.VarName{:σ², typeof(identity)}, Int64}, Vector{Truncated{Normal{Float64}, Continuous, Float64, Float64, Nothing}}, Vector{AbstractPPL.VarName{:σ², typeof(identity)}}, Vector{Float64}, Vector{Set{DynamicPPL.Selector}}}, x::DynamicPPL.Metadata{Dict{AbstractPPL.VarName{:x, typeof(identity)}, Int64}, Vector{Normal{Float64}}, Vector{AbstractPPL.VarName{:x, typeof(identity)}}, Vector{Float64}, Vector{Set{DynamicPPL.Selector}}}}, Float64}, DynamicPPL.Model{typeof(demo), (), (), (), Tuple{}, Tuple{}, DynamicPPL.DefaultContext}, DynamicPPL.DefaultContext}, ForwardDiff.Chunk{2}, ForwardDiff.Tag{DynamicPPL.DynamicPPLTag, Float64}, ForwardDiff.GradientConfig{ForwardDiff.Tag{DynamicPPL.DynamicPPLTag, Float64}, Float64, 2, Vector{ForwardDiff.Dual{ForwardDiff.Tag{DynamicPPL.DynamicPPLTag, Float64}, Float64, 2}}}}}</span>, <span class="ansi-bright-black-fg">sampler</span>::MALA<span class="ansi-bright-black-fg">{Int64, UniformScaling{Bool}}</span>, <span class="ansi-bright-black-fg">state</span>::MALAState<span class="ansi-bright-black-fg">{Vector{Float64}}</span>; <span class="ansi-bright-black-fg">kwargs</span>::@Kwargs<span class="ansi-bright-black-fg">{}</span><span class="ansi-bold">)</span>
<span class="ansi-bright-black-fg">    @</span> <span class="ansi-magenta-fg">Main.Notebook</span> <span class="ansi-bright-black-fg">~/work/docs/docs/tutorials/docs-17-implementing-samplers/</span><span style="text-decoration:underline" class="ansi-bright-black-fg">index.qmd:274</span>
 [20] <span class="ansi-bold">step</span>
<span class="ansi-bright-black-fg">    @</span> <span class="ansi-bright-black-fg">~/work/docs/docs/tutorials/docs-17-implementing-samplers/</span><span style="text-decoration:underline" class="ansi-bright-black-fg">index.qmd:256</span><span class="ansi-bright-black-fg"> [inlined]</span>
 [21] <span class="ansi-bold">#step#108</span>
<span class="ansi-bright-black-fg">    @</span> <span class="ansi-bright-black-fg">~/.julia/packages/Turing/aAIq7/src/mcmc/</span><span style="text-decoration:underline" class="ansi-bright-black-fg">abstractmcmc.jl:90</span><span class="ansi-bright-black-fg"> [inlined]</span>
 [22] <span class="ansi-bold">step</span><span class="ansi-bold">(</span><span class="ansi-bright-black-fg">rng</span>::TaskLocalRNG, <span class="ansi-bright-black-fg">model</span>::DynamicPPL.Model<span class="ansi-bright-black-fg">{typeof(demo), (), (), (), Tuple{}, Tuple{}, DynamicPPL.DefaultContext}</span>, <span class="ansi-bright-black-fg">sampler_wrapper</span>::DynamicPPL.Sampler<span class="ansi-bright-black-fg">{Turing.Inference.ExternalSampler{MALA{Int64, UniformScaling{Bool}}, AutoForwardDiff{nothing, Nothing}, false}}</span>, <span class="ansi-bright-black-fg">state</span>::Turing.Inference.TuringState<span class="ansi-bright-black-fg">{MALAState{Vector{Float64}}, LogDensityProblemsADForwardDiffExt.ForwardDiffLogDensity{LogDensityFunction{DynamicPPL.TypedVarInfo{@NamedTuple{σ²::DynamicPPL.Metadata{Dict{AbstractPPL.VarName{:σ², typeof(identity)}, Int64}, Vector{Truncated{Normal{Float64}, Continuous, Float64, Float64, Nothing}}, Vector{AbstractPPL.VarName{:σ², typeof(identity)}}, Vector{Float64}, Vector{Set{DynamicPPL.Selector}}}, x::DynamicPPL.Metadata{Dict{AbstractPPL.VarName{:x, typeof(identity)}, Int64}, Vector{Normal{Float64}}, Vector{AbstractPPL.VarName{:x, typeof(identity)}}, Vector{Float64}, Vector{Set{DynamicPPL.Selector}}}}, Float64}, DynamicPPL.Model{typeof(demo), (), (), (), Tuple{}, Tuple{}, DynamicPPL.DefaultContext}, DynamicPPL.DefaultContext}, ForwardDiff.Chunk{2}, ForwardDiff.Tag{DynamicPPL.DynamicPPLTag, Float64}, ForwardDiff.GradientConfig{ForwardDiff.Tag{DynamicPPL.DynamicPPLTag, Float64}, Float64, 2, Vector{ForwardDiff.Dual{ForwardDiff.Tag{DynamicPPL.DynamicPPLTag, Float64}, Float64, 2}}}}}</span><span class="ansi-bold">)</span>
<span class="ansi-bright-black-fg">    @</span> <span class="ansi-yellow-fg">Turing.Inference</span> <span class="ansi-bright-black-fg">~/.julia/packages/Turing/aAIq7/src/mcmc/</span><span style="text-decoration:underline" class="ansi-bright-black-fg">abstractmcmc.jl:79</span>
 [23] <span class="ansi-bold">macro expansion</span>
<span class="ansi-bright-black-fg">    @</span> <span class="ansi-bright-black-fg">~/.julia/packages/AbstractMCMC/YrmkI/src/</span><span style="text-decoration:underline" class="ansi-bright-black-fg">sample.jl:176</span><span class="ansi-bright-black-fg"> [inlined]</span>
 [24] <span class="ansi-bold">macro expansion</span>
<span class="ansi-bright-black-fg">    @</span> <span class="ansi-bright-black-fg">~/.julia/packages/AbstractMCMC/YrmkI/src/</span><span style="text-decoration:underline" class="ansi-bright-black-fg">logging.jl:16</span><span class="ansi-bright-black-fg"> [inlined]</span>
 [25] <span class="ansi-bold">mcmcsample</span><span class="ansi-bold">(</span><span class="ansi-bright-black-fg">rng</span>::TaskLocalRNG, <span class="ansi-bright-black-fg">model</span>::DynamicPPL.Model<span class="ansi-bright-black-fg">{typeof(demo), (), (), (), Tuple{}, Tuple{}, DynamicPPL.DefaultContext}</span>, <span class="ansi-bright-black-fg">sampler</span>::DynamicPPL.Sampler<span class="ansi-bright-black-fg">{Turing.Inference.ExternalSampler{MALA{Int64, UniformScaling{Bool}}, AutoForwardDiff{nothing, Nothing}, false}}</span>, <span class="ansi-bright-black-fg">N</span>::Int64; <span class="ansi-bright-black-fg">progress</span>::Bool, <span class="ansi-bright-black-fg">progressname</span>::String, <span class="ansi-bright-black-fg">callback</span>::Nothing, <span class="ansi-bright-black-fg">discard_initial</span>::Int64, <span class="ansi-bright-black-fg">thinning</span>::Int64, <span class="ansi-bright-black-fg">chain_type</span>::Type, <span class="ansi-bright-black-fg">initial_state</span>::Nothing, <span class="ansi-bright-black-fg">kwargs</span>::@Kwargs<span class="ansi-bright-black-fg">{}</span><span class="ansi-bold">)</span>
<span class="ansi-bright-black-fg">    @</span> <span class="ansi-magenta-fg">AbstractMCMC</span> <span class="ansi-bright-black-fg">~/.julia/packages/AbstractMCMC/YrmkI/src/</span><span style="text-decoration:underline" class="ansi-bright-black-fg">sample.jl:120</span>
 [26] <span class="ansi-bold">sample</span><span class="ansi-bold">(</span><span class="ansi-bright-black-fg">rng</span>::TaskLocalRNG, <span class="ansi-bright-black-fg">model</span>::DynamicPPL.Model<span class="ansi-bright-black-fg">{typeof(demo), (), (), (), Tuple{}, Tuple{}, DynamicPPL.DefaultContext}</span>, <span class="ansi-bright-black-fg">sampler</span>::DynamicPPL.Sampler<span class="ansi-bright-black-fg">{Turing.Inference.ExternalSampler{MALA{Int64, UniformScaling{Bool}}, AutoForwardDiff{nothing, Nothing}, false}}</span>, <span class="ansi-bright-black-fg">N</span>::Int64; <span class="ansi-bright-black-fg">chain_type</span>::Type, <span class="ansi-bright-black-fg">resume_from</span>::Nothing, <span class="ansi-bright-black-fg">initial_state</span>::Nothing, <span class="ansi-bright-black-fg">kwargs</span>::@Kwargs<span class="ansi-bright-black-fg">{progress::Bool}</span><span class="ansi-bold">)</span>
<span class="ansi-bright-black-fg">    @</span> <span class="ansi-cyan-fg">DynamicPPL</span> <span class="ansi-bright-black-fg">~/.julia/packages/DynamicPPL/E4kDs/src/</span><span style="text-decoration:underline" class="ansi-bright-black-fg">sampler.jl:93</span>
 [27] <span class="ansi-bold">sample</span>
<span class="ansi-bright-black-fg">    @</span> <span class="ansi-bright-black-fg">~/.julia/packages/DynamicPPL/E4kDs/src/</span><span style="text-decoration:underline" class="ansi-bright-black-fg">sampler.jl:83</span><span class="ansi-bright-black-fg"> [inlined]</span>
 [28] <span class="ansi-bold">#sample#4</span>
<span class="ansi-bright-black-fg">    @</span> <span class="ansi-bright-black-fg">~/.julia/packages/Turing/aAIq7/src/mcmc/</span><span style="text-decoration:underline" class="ansi-bright-black-fg">Inference.jl:263</span><span class="ansi-bright-black-fg"> [inlined]</span>
 [29] <span class="ansi-bold">sample</span>
<span class="ansi-bright-black-fg">    @</span> <span class="ansi-bright-black-fg">~/.julia/packages/Turing/aAIq7/src/mcmc/</span><span style="text-decoration:underline" class="ansi-bright-black-fg">Inference.jl:256</span><span class="ansi-bright-black-fg"> [inlined]</span>
 [30] <span class="ansi-bold">#sample#3</span>
<span class="ansi-bright-black-fg">    @</span> <span class="ansi-bright-black-fg">~/.julia/packages/Turing/aAIq7/src/mcmc/</span><span style="text-decoration:underline" class="ansi-bright-black-fg">Inference.jl:253</span><span class="ansi-bright-black-fg"> [inlined]</span>
 [31] top-level scope
<span class="ansi-bright-black-fg">    @</span> <span class="ansi-bright-black-fg">~/work/docs/docs/tutorials/docs-17-implementing-samplers/</span><span style="text-decoration:underline" class="ansi-bright-black-fg">index.qmd:456</span></pre>
</div>
</div>
</div>
<p>As expected, we run into a <code>DomainError</code> at some point, while if we set <code>unconstrained=true</code>, letting Turing.jl transform the model to a unconstrained form behind the scenes, everything works as expected:</p>
<div id="52" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sample</span>(<span class="fu">demo</span>(), <span class="fu">externalsampler</span>(sampler; unconstrained<span class="op">=</span><span class="cn">true</span>), <span class="fl">10_000</span>; progress<span class="op">=</span><span class="cn">false</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<div class="ansi-escaped-output">
<pre>Chains MCMC chain (10000×3×1 Array{Float64, 3}):

Iterations        = 1:1:10000
Number of chains  = 1
Samples per chain = 10000
Wall duration     = 0.55 seconds
Compute duration  = 0.55 seconds
parameters        = σ², x
internals         = lp

Summary Statistics
 <span class="ansi-bold"> parameters </span> <span class="ansi-bold">    mean </span> <span class="ansi-bold">     std </span> <span class="ansi-bold">    mcse </span> <span class="ansi-bold"> ess_bulk </span> <span class="ansi-bold"> ess_tail </span> <span class="ansi-bold">    rhat </span> <span class="ansi-bold"> e</span> ⋯
 <span class="ansi-bright-black-fg">     Symbol </span> <span class="ansi-bright-black-fg"> Float64 </span> <span class="ansi-bright-black-fg"> Float64 </span> <span class="ansi-bright-black-fg"> Float64 </span> <span class="ansi-bright-black-fg">  Float64 </span> <span class="ansi-bright-black-fg">  Float64 </span> <span class="ansi-bright-black-fg"> Float64 </span> <span class="ansi-bright-black-fg">  </span> ⋯

          σ²    0.8610    0.5752    0.0244   429.1269   279.2146    1.0029     ⋯
           x    0.0194    0.8772    0.0379   657.7923   473.9032    1.0005     ⋯
<span class="ansi-cyan-fg">                                                                1 column omitted</span>

Quantiles
 <span class="ansi-bold"> parameters </span> <span class="ansi-bold">    2.5% </span> <span class="ansi-bold">   25.0% </span> <span class="ansi-bold">   50.0% </span> <span class="ansi-bold">   75.0% </span> <span class="ansi-bold">   97.5% </span>
 <span class="ansi-bright-black-fg">     Symbol </span> <span class="ansi-bright-black-fg"> Float64 </span> <span class="ansi-bright-black-fg"> Float64 </span> <span class="ansi-bright-black-fg"> Float64 </span> <span class="ansi-bright-black-fg"> Float64 </span> <span class="ansi-bright-black-fg"> Float64 </span>

          σ²    0.1416    0.3987    0.7404    1.1792    2.3021
           x   -1.8948   -0.3739    0.0120    0.4088    2.0011
</pre>
</div>
</div>
</div>
<p>Neat!</p>
<p>Similarly, which automatic differentiation backend one should use can be specified through the <code>adtype</code> keyword argument too. For example, if we want to use <a href="https://github.com/JuliaDiff/ReverseDiff.jl">ReverseDiff.jl</a> instead of the default <a href="https://github.com/JuliaDiff/ForwardDiff.jl">ForwardDiff.jl</a>:</p>
<div id="54" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">ReverseDiff</span>: ReverseDiff</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Specify that we want to use `AutoReverseDiff`.</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sample</span>(</span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">demo</span>(),</span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">externalsampler</span>(sampler; unconstrained<span class="op">=</span><span class="cn">true</span>, adtype<span class="op">=</span><span class="fu">AutoReverseDiff</span>()),</span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>    <span class="fl">10_000</span>;</span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>    progress<span class="op">=</span><span class="cn">false</span></span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<div class="ansi-escaped-output">
<pre>Chains MCMC chain (10000×3×1 Array{Float64, 3}):

Iterations        = 1:1:10000
Number of chains  = 1
Samples per chain = 10000
Wall duration     = 2.91 seconds
Compute duration  = 2.91 seconds
parameters        = σ², x
internals         = lp

Summary Statistics
 <span class="ansi-bold"> parameters </span> <span class="ansi-bold">    mean </span> <span class="ansi-bold">     std </span> <span class="ansi-bold">    mcse </span> <span class="ansi-bold"> ess_bulk </span> <span class="ansi-bold"> ess_tail </span> <span class="ansi-bold">    rhat </span> <span class="ansi-bold"> e</span> ⋯
 <span class="ansi-bright-black-fg">     Symbol </span> <span class="ansi-bright-black-fg"> Float64 </span> <span class="ansi-bright-black-fg"> Float64 </span> <span class="ansi-bright-black-fg"> Float64 </span> <span class="ansi-bright-black-fg">  Float64 </span> <span class="ansi-bright-black-fg">  Float64 </span> <span class="ansi-bright-black-fg"> Float64 </span> <span class="ansi-bright-black-fg">  </span> ⋯

          σ²    0.8781    0.6886    0.0658    66.7551    24.6851    1.0276     ⋯
           x   -0.0157    1.1188    0.0926   232.7231   149.1105    1.0197     ⋯
<span class="ansi-cyan-fg">                                                                1 column omitted</span>

Quantiles
 <span class="ansi-bold"> parameters </span> <span class="ansi-bold">    2.5% </span> <span class="ansi-bold">   25.0% </span> <span class="ansi-bold">   50.0% </span> <span class="ansi-bold">   75.0% </span> <span class="ansi-bold">   97.5% </span>
 <span class="ansi-bright-black-fg">     Symbol </span> <span class="ansi-bright-black-fg"> Float64 </span> <span class="ansi-bright-black-fg"> Float64 </span> <span class="ansi-bright-black-fg"> Float64 </span> <span class="ansi-bright-black-fg"> Float64 </span> <span class="ansi-bright-black-fg"> Float64 </span>

          σ²    0.0922    0.3545    0.7114    1.2127    2.7415
           x   -3.2882   -0.3774    0.0231    0.3690    2.4916
</pre>
</div>
</div>
</div>
<p>Double-neat.</p>
</section>
</section>
<section id="summary" class="level2">
<h2 class="anchored" data-anchor-id="summary">Summary</h2>
<p>At this point it’s worth maybe reminding ourselves what we did and also <em>why</em> we did it:</p>
<ol type="1">
<li>We define our models in the <a href="https://github.com/tpapp/LogDensityProblems.jl">LogDensityProblems.jl</a> interface because it makes the sampler agnostic to how the underlying model is implemented.</li>
<li>We implement our sampler in the <a href="https://github.com/TuringLang/AbstractMCMC.jl">AbstractMCMC.jl</a> interface, which just means that our sampler is a subtype of <code>AbstractMCMC.AbstractSampler</code> and we implement the MCMC transition in <code>AbstractMCMC.step</code>.</li>
<li>Points 1 and 2 makes it so our sampler can be used with a wide range of model implementations, amongst them being models implemented in both Turing.jl and Stan. This gives you, the inference implementer, a large collection of models to test your inference method on, in addition to allowing users of Turing.jl and Stan to try out your inference method with minimal effort.</li>
</ol>


</section>


<a onclick="window.scrollTo(0, 0); return false;" role="button" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a><div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>We’re going with the leapfrog formulation because in a future version of this tutorial we’ll add a section extending this simple “baseline” MALA sampler to more complex versions. See <a href="https://github.com/TuringLang/docs/issues/479">issue #479</a> for progress on this.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>There is no such thing as a proper interface in Julia (at least not officially), and so we use the word “interface” here to mean a few minimal methods that needs to be implemented by any type that we treat as a target model.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/turinglang\.org\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../../tutorials/docs-07-for-developers-variational-inference/index.html" class="pagination-link" aria-label="Variational Inference">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Variational Inference</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../../versions.html" class="pagination-link" aria-label="Versions">
        <span class="nav-page-text">Versions</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>Turing is created by <a href="http://mlg.eng.cam.ac.uk/hong/" target="_blank">Hong Ge</a>, and lovingly maintained by the <a href="https://github.com/TuringLang/Turing.jl/graphs/contributors" target="_blank">core team</a> of volunteers. <br> The contents of this website are © 2024 under the terms of the <a href="https://github.com/TuringLang/Turing.jl/blob/master/LICENCE" target="_blank">MIT License</a>.</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    <div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/TuringLang/docs/edit/master/tutorials/docs-17-implementing-samplers/index.qmd" target="_blank" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/TuringLang/docs/issues/new" target="_blank" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="https://x.com/TuringLang">
      <i class="bi bi-twitter" role="img" aria-label="Turing Twitter">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/TuringLang/Turing.jl">
      <i class="bi bi-github" role="img" aria-label="Turing GitHub">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>




<script src="../../site_libs/quarto-html/zenscroll-min.js"></script>
</body></html>